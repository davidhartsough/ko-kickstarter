!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){var ko=require("knockout"),director=require("director");ko.components.register("hello-world",require("./layouts/hello-world/hello-world.js")),ko.components.register("my-page",require("./layouts/my-page/my-page.js")),ko.components.register("my-component",require("./components/my-component/my-component.js"));var ViewModel=function(){var self=this;this.greeting=ko.observable("Happy developing :)"),this.page=ko.observable("hello-world"),this.pageParams=ko.observable({first:"Planet",last:"Earth"}),this.helloWorld=function(){self.page("hello-world"),self.pageParams({first:"Planet",last:"Earth"})},this.myHelloWorld=function(george,washington){self.page("hello-world"),self.pageParams({first:george,last:washington})},this.myPage=function(){self.page("my-page"),self.pageParams(null)}},viewModel=new ViewModel,routes={"/hello-world":viewModel.helloWorld,"/hello-world/gw/:george/:washington":viewModel.myHelloWorld,"/my-page":viewModel.myPage},router=director.Router(routes);router.init(),ko.applyBindings(viewModel)},{"./components/my-component/my-component.js":3,"./layouts/hello-world/hello-world.js":5,"./layouts/my-page/my-page.js":7,director:8,knockout:9}],2:[function(require,module,exports){module.exports='<li>\n\t<p class="item-text" data-bind="text: givenValue"></p>\n</li>'},{}],3:[function(require,module,exports){function viewModel(params){this.givenValue=params.myValue}var template=(require("knockout"),require("./my-component.html"));module.exports={viewModel:viewModel,template:template}},{"./my-component.html":2,knockout:9}],4:[function(require,module,exports){module.exports='<p>First name: <input data-bind="value: firstName" /></p>\n<p>Last name: <input data-bind="value: lastName" /></p>\n<h2>Hello, <span class="full-name" data-bind="text: fullName"> </span>!</h2>'},{}],5:[function(require,module,exports){function viewModel(params){this.firstName=ko.observable(params.first),this.lastName=ko.observable(params.last),this.fullName=ko.pureComputed(function(){return this.firstName()+" "+this.lastName()},this)}var ko=require("knockout"),template=require("./hello-world.html");module.exports={viewModel:viewModel,template:template}},{"./hello-world.html":4,knockout:9}],6:[function(require,module,exports){module.exports='<h2 class="page-title" data-bind="text: pageTitle"></h2>\n<ul class="items-list" data-bind="foreach: items">\n\t<my-component params="myValue: $data"></my-component>\n</ul>'},{}],7:[function(require,module,exports){function viewModel(){this.pageTitle=ko.observable("My Page"),this.items=ko.observableArray(["item1","item2","item3","item4","item5"])}var ko=require("knockout"),template=require("./my-page.html");module.exports={viewModel:viewModel,template:template}},{"./my-page.html":6,knockout:9}],8:[function(require,module,exports){!function(exports){function dlocHashEmpty(){return""===dloc.hash||"#"===dloc.hash}function _every(arr,iterator){for(var i=0;i<arr.length;i+=1)if(iterator(arr[i],i,arr)===!1)return}function _flatten(arr){for(var flat=[],i=0,n=arr.length;i<n;i++)flat=flat.concat(arr[i]);return flat}function _asyncEverySeries(arr,iterator,callback){if(!arr.length)return callback();var completed=0;!function iterate(){iterator(arr[completed],function(err){err||err===!1?(callback(err),callback=function(){}):(completed+=1,completed===arr.length?callback():iterate())})}()}function paramifyString(str,params,mod){mod=str;for(var param in params)if(params.hasOwnProperty(param)&&(mod=params[param](str),mod!==str))break;return mod===str?"([._a-zA-Z0-9-%()]+)":mod}function regifyString(str,params){for(var matches,last=0,out="";matches=str.substr(last).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)last=matches.index+matches[0].length,matches[0]=matches[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),out+=str.substr(0,matches.index)+matches[0];str=out+=str.substr(last);var capture,length,captures=str.match(/:([^\/]+)/gi);if(captures){length=captures.length;for(var i=0;i<length;i++)capture=captures[i],str="::"===capture.slice(0,2)?capture.slice(1):str.replace(capture,paramifyString(capture,params))}return str}function terminator(routes,delimiter,start,stop){var i,last=0,left=0,right=0,start=(start||"(").toString(),stop=(stop||")").toString();for(i=0;i<routes.length;i++){var chunk=routes[i];if(chunk.indexOf(start,last)>chunk.indexOf(stop,last)||~chunk.indexOf(start,last)&&!~chunk.indexOf(stop,last)||!~chunk.indexOf(start,last)&&~chunk.indexOf(stop,last)){if(left=chunk.indexOf(start,last),right=chunk.indexOf(stop,last),~left&&!~right||!~left&&~right){var tmp=routes.slice(0,(i||1)+1).join(delimiter);routes=[tmp].concat(routes.slice((i||1)+1))}last=(right>left?right:left)+1,i=0}else last=0}return routes}var dloc=document.location,listener={mode:"modern",hash:dloc.hash,history:!1,check:function(){var h=dloc.hash;h!=this.hash&&(this.hash=h,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(fn,history){function onchange(onChangeEvent){for(var i=0,l=Router.listeners.length;i<l;i++)Router.listeners[i](onChangeEvent)}var self=this;if(this.history=history,Router.listeners||(Router.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=onchange},500):window.onhashchange=onchange,this.mode="modern";else{var frame=document.createElement("iframe");frame.id="state-frame",frame.style.display="none",document.body.appendChild(frame),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&self.check()}),window.setInterval(function(){self.check()},50),this.onHashChanged=onchange,this.mode="legacy"}return Router.listeners.push(fn),this.mode},destroy:function(fn){if(Router&&Router.listeners)for(var listeners=Router.listeners,i=listeners.length-1;i>=0;i--)listeners[i]===fn&&listeners.splice(i,1)},setHash:function(s){return"legacy"===this.mode&&this.writeFrame(s),this.history===!0?(window.history.pushState({},document.title,s),this.fire()):dloc.hash="/"===s[0]?s:"/"+s,this},writeFrame:function(s){var f=document.getElementById("state-frame"),d=f.contentDocument||f.contentWindow.document;d.open(),d.write("<script>_hash = '"+s+"'; onload = parent.listener.syncHash;<script>"),d.close()},syncHash:function(){var s=this._hash;return s!=dloc.hash&&(dloc.hash=s),this},onHashChanged:function(){}},Router=exports.Router=function(routes){return this instanceof Router?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),void this.mount(routes||{})):new Router(routes)};Router.prototype.init=function(r){var routeTo,self=this;return this.handler=function(onChangeEvent){var newURL=onChangeEvent&&onChangeEvent.newURL||window.location.hash,url=self.history===!0?self.getPath():newURL.replace(/.*#/,"");self.dispatch("on","/"===url.charAt(0)?url:"/"+url)},listener.init(this.handler,this.history),this.history===!1?dlocHashEmpty()&&r?dloc.hash=r:dlocHashEmpty()||self.dispatch("on","/"+dloc.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(routeTo=dlocHashEmpty()&&r?r:dlocHashEmpty()?null:dloc.hash.replace(/^#/,""),routeTo&&window.history.replaceState({},document.title,routeTo)):routeTo=this.getPath(),(routeTo||this.run_in_init===!0)&&this.handler()),this},Router.prototype.explode=function(){var v=this.history===!0?this.getPath():dloc.hash;return"/"===v.charAt(1)&&(v=v.slice(1)),v.slice(1,v.length).split("/")},Router.prototype.setRoute=function(i,v,val){var url=this.explode();return"number"==typeof i&&"string"==typeof v?url[i]=v:"string"==typeof val?url.splice(i,v,s):url=[i],listener.setHash(url.join("/")),url},Router.prototype.insertEx=function(method,path,route,parent){return"once"===method&&(method="on",route=function(route){var once=!1;return function(){if(!once)return once=!0,route.apply(this,arguments)}}(route)),this._insert(method,path,route,parent)},Router.prototype.getRoute=function(v){var ret=v;if("number"==typeof v)ret=this.explode()[v];else if("string"==typeof v){var h=this.explode();ret=h.indexOf(v)}else ret=this.explode();return ret},Router.prototype.destroy=function(){return listener.destroy(this.handler),this},Router.prototype.getPath=function(){var path=window.location.pathname;return"/"!==path.substr(0,1)&&(path="/"+path),path};var QUERY_SEPARATOR=/\?.*/;Router.prototype.configure=function(options){options=options||{};for(var i=0;i<this.methods.length;i++)this._methods[this.methods[i]]=!0;return this.recurse=options.recurse||this.recurse||!1,this.async=options.async||!1,this.delimiter=options.delimiter||"/",this.strict="undefined"==typeof options.strict||options.strict,this.notfound=options.notfound,this.resource=options.resource,this.history=options.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&options.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&options.convert_hash_in_init!==!1,this.every={after:options.after||null,before:options.before||null,on:options.on||null},this},Router.prototype.param=function(token,matcher){":"!==token[0]&&(token=":"+token);var compiled=new RegExp(token,"g");return this.params[token]=function(str){return str.replace(compiled,matcher.source||matcher)},this},Router.prototype.on=Router.prototype.route=function(method,path,route){var self=this;return route||"function"!=typeof path||(route=path,path=method,method="on"),Array.isArray(path)?path.forEach(function(p){self.on(method,p,route)}):(path.source&&(path=path.source.replace(/\\\//gi,"/")),Array.isArray(method)?method.forEach(function(m){self.on(m.toLowerCase(),path,route)}):(path=path.split(new RegExp(this.delimiter)),path=terminator(path,this.delimiter),void this.insert(method,this.scope.concat(path),route)))},Router.prototype.path=function(path,routesFn){var length=this.scope.length;path.source&&(path=path.source.replace(/\\\//gi,"/")),path=path.split(new RegExp(this.delimiter)),path=terminator(path,this.delimiter),this.scope=this.scope.concat(path),routesFn.call(this,this),this.scope.splice(length,path.length)},Router.prototype.dispatch=function(method,path,callback){function updateAndInvoke(){self.last=fns.after,self.invoke(self.runlist(fns),self,callback)}var after,self=this,fns=this.traverse(method,path.replace(QUERY_SEPARATOR,""),this.routes,""),invoked=this._invoked;return this._invoked=!0,fns&&0!==fns.length?("forward"===this.recurse&&(fns=fns.reverse()),after=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],after&&after.length>0&&invoked?(this.async?this.invoke(after,this,updateAndInvoke):(this.invoke(after,this),updateAndInvoke()),!0):(updateAndInvoke(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:method,path:path},callback),!1)},Router.prototype.invoke=function(fns,thisArg,callback){var apply,self=this;this.async?(apply=function(fn,next){return Array.isArray(fn)?_asyncEverySeries(fn,apply,next):void("function"==typeof fn&&fn.apply(thisArg,(fns.captures||[]).concat(next)))},_asyncEverySeries(fns,apply,function(){callback&&callback.apply(thisArg,arguments)})):(apply=function(fn){return Array.isArray(fn)?_every(fn,apply):"function"==typeof fn?fn.apply(thisArg,fns.captures||[]):void("string"==typeof fn&&self.resource&&self.resource[fn].apply(thisArg,fns.captures||[]))},_every(fns,apply))},Router.prototype.traverse=function(method,path,routes,regexp,filter){function filterRoutes(routes){function deepCopy(source){for(var result=[],i=0;i<source.length;i++)result[i]=Array.isArray(source[i])?deepCopy(source[i]):source[i];return result}function applyFilter(fns){for(var i=fns.length-1;i>=0;i--)Array.isArray(fns[i])?(applyFilter(fns[i]),0===fns[i].length&&fns.splice(i,1)):filter(fns[i])||fns.splice(i,1)}if(!filter)return routes;var newRoutes=deepCopy(routes);return newRoutes.matched=routes.matched,newRoutes.captures=routes.captures,newRoutes.after=routes.after.filter(filter),applyFilter(newRoutes),newRoutes}var current,exact,match,next,fns=[];if(path===this.delimiter&&routes[method])return next=[[routes.before,routes[method]].filter(Boolean)],next.after=[routes.after].filter(Boolean),next.matched=!0,next.captures=[],filterRoutes(next);for(var r in routes)if(routes.hasOwnProperty(r)&&(!this._methods[r]||this._methods[r]&&"object"==typeof routes[r]&&!Array.isArray(routes[r]))){if(current=exact=regexp+this.delimiter+r,this.strict||(exact+="["+this.delimiter+"]?"),match=path.match(new RegExp("^"+exact)),!match)continue;if(match[0]&&match[0]==path&&routes[r][method])return next=[[routes[r].before,routes[r][method]].filter(Boolean)],next.after=[routes[r].after].filter(Boolean),next.matched=!0,next.captures=match.slice(1),this.recurse&&routes===this.routes&&(next.push([routes.before,routes.on].filter(Boolean)),next.after=next.after.concat([routes.after].filter(Boolean))),filterRoutes(next);if(next=this.traverse(method,path,routes[r],current),next.matched)return next.length>0&&(fns=fns.concat(next)),this.recurse&&(fns.push([routes[r].before,routes[r].on].filter(Boolean)),next.after=next.after.concat([routes[r].after].filter(Boolean)),routes===this.routes&&(fns.push([routes.before,routes.on].filter(Boolean)),next.after=next.after.concat([routes.after].filter(Boolean)))),fns.matched=!0,fns.captures=next.captures,fns.after=next.after,filterRoutes(fns)}return!1},Router.prototype.insert=function(method,path,route,parent){var methodType,parentType,isArray,nested,part;if(path=path.filter(function(p){return p&&p.length>0}),parent=parent||this.routes,part=path.shift(),/\:|\*/.test(part)&&!/\\d|\\w/.test(part)&&(part=regifyString(part,this.params)),path.length>0)return parent[part]=parent[part]||{},this.insert(method,path,route,parent[part]);if(part||path.length||parent!==this.routes){if(parentType=typeof parent[part],isArray=Array.isArray(parent[part]),parent[part]&&!isArray&&"object"==parentType)switch(methodType=typeof parent[part][method]){case"function":return void(parent[part][method]=[parent[part][method],route]);case"object":return void parent[part][method].push(route);case"undefined":return void(parent[part][method]=route)}else if("undefined"==parentType)return nested={},nested[method]=route,void(parent[part]=nested);throw new Error("Invalid route context: "+parentType)}switch(methodType=typeof parent[method]){case"function":return void(parent[method]=[parent[method],route]);case"object":return void parent[method].push(route);case"undefined":return void(parent[method]=route)}},Router.prototype.extend=function(methods){function extend(method){self._methods[method]=!0,self[method]=function(){var extra=1===arguments.length?[method,""]:[method];self.on.apply(self,extra.concat(Array.prototype.slice.call(arguments)))}}var i,self=this,len=methods.length;for(i=0;i<len;i++)extend(methods[i])},Router.prototype.runlist=function(fns){var runlist=this.every&&this.every.before?[this.every.before].concat(_flatten(fns)):_flatten(fns);return this.every&&this.every.on&&runlist.push(this.every.on),runlist.captures=fns.captures,runlist.source=fns.source,runlist},Router.prototype.mount=function(routes,path){function insertOrMount(route,local){var rename=route,parts=route.split(self.delimiter),routeType=typeof routes[route],isRoute=""===parts[0]||!self._methods[parts[0]],event=isRoute?"on":rename;return isRoute&&(rename=rename.slice((rename.match(new RegExp("^"+self.delimiter))||[""])[0].length),parts.shift()),isRoute&&"object"===routeType&&!Array.isArray(routes[route])?(local=local.concat(parts),void self.mount(routes[route],local)):(isRoute&&(local=local.concat(rename.split(self.delimiter)),local=terminator(local,self.delimiter)),void self.insert(event,local,routes[route]))}if(routes&&"object"==typeof routes&&!Array.isArray(routes)){var self=this;path=path||[],Array.isArray(path)||(path=path.split(self.delimiter));for(var route in routes)routes.hasOwnProperty(route)&&insertOrMount(route,path.slice(0))}}}("object"==typeof exports?exports:window)},{}],9:[function(require,module,exports){!function(){var DEBUG=!0;!function(undefined){var window=this||(0,eval)("this"),document=window.document,navigator=window.navigator,jQueryInstance=window.jQuery,JSON=window.JSON;!function(factory){"function"==typeof define&&define.amd?define(["exports","require"],factory):factory("object"==typeof exports&&"object"==typeof module?module.exports||exports:window.ko={})}(function(koExports,amdRequire){function valuesArePrimitiveAndEqual(a,b){var oldValueIsPrimitive=null===a||typeof a in primitiveTypes;return!!oldValueIsPrimitive&&a===b}function throttle(callback,timeout){var timeoutInstance;return function(){timeoutInstance||(timeoutInstance=ko.utils.setTimeout(function(){timeoutInstance=undefined,callback()},timeout))}}function debounce(callback,timeout){var timeoutInstance;return function(){clearTimeout(timeoutInstance),timeoutInstance=ko.utils.setTimeout(callback,timeout)}}function applyExtenders(requestedExtenders){var target=this;return requestedExtenders&&ko.utils.objectForEach(requestedExtenders,function(key,value){var extenderHandler=ko.extenders[key];"function"==typeof extenderHandler&&(target=extenderHandler(target,value)||target)}),target}function limitNotifySubscribers(value,event){event&&event!==defaultEvent?"beforeChange"===event?this._limitBeforeChange(value):this._origNotifySubscribers(value,event):this._limitChange(value)}function computedDisposeDependencyCallback(id,entryToDispose){null!==entryToDispose&&entryToDispose.dispose&&entryToDispose.dispose()}function computedBeginDependencyDetectionCallback(subscribable,id){var computedObservable=this.computedObservable,state=computedObservable[computedState];state.isDisposed||(this.disposalCount&&this.disposalCandidates[id]?(computedObservable.addDependencyTracking(id,subscribable,this.disposalCandidates[id]),this.disposalCandidates[id]=null,--this.disposalCount):state.dependencyTracking[id]||computedObservable.addDependencyTracking(id,subscribable,state.isSleeping?{_target:subscribable}:computedObservable.subscribeToDependency(subscribable)))}function makeEventHandlerShortcut(eventName){ko.bindingHandlers[eventName]={init:function(element,valueAccessor,allBindings,viewModel,bindingContext){var newValueAccessor=function(){var result={};return result[eventName]=valueAccessor(),result};return ko.bindingHandlers.event.init.call(this,element,newValueAccessor,allBindings,viewModel,bindingContext)}}}function makeWithIfBinding(bindingKey,isWith,isNot,makeContextCallback){ko.bindingHandlers[bindingKey]={init:function(element,valueAccessor,allBindings,viewModel,bindingContext){var didDisplayOnLastUpdate,savedNodes;return ko.computed(function(){var dataValue=ko.utils.unwrapObservable(valueAccessor()),shouldDisplay=!isNot!=!dataValue,isFirstRender=!savedNodes,needsRefresh=isFirstRender||isWith||shouldDisplay!==didDisplayOnLastUpdate;needsRefresh&&(isFirstRender&&ko.computedContext.getDependenciesCount()&&(savedNodes=ko.utils.cloneNodes(ko.virtualElements.childNodes(element),!0)),shouldDisplay?(isFirstRender||ko.virtualElements.setDomNodeChildren(element,ko.utils.cloneNodes(savedNodes)),ko.applyBindingsToDescendants(makeContextCallback?makeContextCallback(bindingContext,dataValue):bindingContext,element)):ko.virtualElements.emptyNode(element),didDisplayOnLastUpdate=shouldDisplay)},null,{disposeWhenNodeIsRemoved:element}),{controlsDescendantBindings:!0}}},ko.expressionRewriting.bindingRewriteValidators[bindingKey]=!1,ko.virtualElements.allowedBindings[bindingKey]=!0}var ko="undefined"!=typeof koExports?koExports:{};ko.exportSymbol=function(koPath,object){for(var tokens=koPath.split("."),target=ko,i=0;i<tokens.length-1;i++)target=target[tokens[i]];target[tokens[tokens.length-1]]=object},ko.exportProperty=function(owner,publicName,object){owner[publicName]=object},ko.version="3.4.0",ko.exportSymbol("version",ko.version),ko.options={deferUpdates:!1,useOnlyNativeEvents:!1},ko.utils=function(){function objectForEach(obj,action){for(var prop in obj)obj.hasOwnProperty(prop)&&action(prop,obj[prop])}function extend(target,source){if(source)for(var prop in source)source.hasOwnProperty(prop)&&(target[prop]=source[prop]);return target}function setPrototypeOf(obj,proto){return obj.__proto__=proto,obj}function isClickOnCheckableElement(element,eventType){if("input"!==ko.utils.tagNameLower(element)||!element.type)return!1;if("click"!=eventType.toLowerCase())return!1;var inputType=element.type;return"checkbox"==inputType||"radio"==inputType}function toggleDomNodeCssClass(node,classNames,shouldHaveClass){var addOrRemoveFn;classNames&&("object"==typeof node.classList?(addOrRemoveFn=node.classList[shouldHaveClass?"add":"remove"],ko.utils.arrayForEach(classNames.match(cssClassNameRegex),function(className){addOrRemoveFn.call(node.classList,className)})):"string"==typeof node.className.baseVal?toggleObjectClassPropertyString(node.className,"baseVal",classNames,shouldHaveClass):toggleObjectClassPropertyString(node,"className",classNames,shouldHaveClass))}function toggleObjectClassPropertyString(obj,prop,classNames,shouldHaveClass){var currentClassNames=obj[prop].match(cssClassNameRegex)||[];ko.utils.arrayForEach(classNames.match(cssClassNameRegex),function(className){ko.utils.addOrRemoveItem(currentClassNames,className,shouldHaveClass)}),obj[prop]=currentClassNames.join(" ")}var canSetPrototype={__proto__:[]}instanceof Array,canUseSymbols=!DEBUG&&"function"==typeof Symbol,knownEvents={},knownEventTypesByEventName={},keyEventTypeName=navigator&&/Firefox\/2/i.test(navigator.userAgent)?"KeyboardEvent":"UIEvents";knownEvents[keyEventTypeName]=["keyup","keydown","keypress"],knownEvents.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],objectForEach(knownEvents,function(eventType,knownEventsForType){if(knownEventsForType.length)for(var i=0,j=knownEventsForType.length;i<j;i++)knownEventTypesByEventName[knownEventsForType[i]]=eventType});var eventsThatMustBeRegisteredUsingAttachEvent={propertychange:!0},ieVersion=document&&function(){for(var version=3,div=document.createElement("div"),iElems=div.getElementsByTagName("i");div.innerHTML="<!--[if gt IE "+ ++version+"]><i></i><![endif]-->",iElems[0];);return version>4?version:undefined}(),isIe6=6===ieVersion,isIe7=7===ieVersion,cssClassNameRegex=/\S+/g;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(array,action){for(var i=0,j=array.length;i<j;i++)action(array[i],i)},arrayIndexOf:function(array,item){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(array,item);for(var i=0,j=array.length;i<j;i++)if(array[i]===item)return i;return-1},arrayFirst:function(array,predicate,predicateOwner){for(var i=0,j=array.length;i<j;i++)if(predicate.call(predicateOwner,array[i],i))return array[i];return null},arrayRemoveItem:function(array,itemToRemove){var index=ko.utils.arrayIndexOf(array,itemToRemove);index>0?array.splice(index,1):0===index&&array.shift()},arrayGetDistinctValues:function(array){array=array||[];for(var result=[],i=0,j=array.length;i<j;i++)ko.utils.arrayIndexOf(result,array[i])<0&&result.push(array[i]);return result},arrayMap:function(array,mapping){array=array||[];for(var result=[],i=0,j=array.length;i<j;i++)result.push(mapping(array[i],i));return result},arrayFilter:function(array,predicate){array=array||[];for(var result=[],i=0,j=array.length;i<j;i++)predicate(array[i],i)&&result.push(array[i]);return result},arrayPushAll:function(array,valuesToPush){if(valuesToPush instanceof Array)array.push.apply(array,valuesToPush);else for(var i=0,j=valuesToPush.length;i<j;i++)array.push(valuesToPush[i]);return array},addOrRemoveItem:function(array,value,included){var existingEntryIndex=ko.utils.arrayIndexOf(ko.utils.peekObservable(array),value);existingEntryIndex<0?included&&array.push(value):included||array.splice(existingEntryIndex,1)},canSetPrototype:canSetPrototype,extend:extend,setPrototypeOf:setPrototypeOf,setPrototypeOfOrExtend:canSetPrototype?setPrototypeOf:extend,objectForEach:objectForEach,objectMap:function(source,mapping){if(!source)return source;var target={};for(var prop in source)source.hasOwnProperty(prop)&&(target[prop]=mapping(source[prop],prop,source));return target},emptyDomNode:function(domNode){for(;domNode.firstChild;)ko.removeNode(domNode.firstChild)},moveCleanedNodesToContainerElement:function(nodes){for(var nodesArray=ko.utils.makeArray(nodes),templateDocument=nodesArray[0]&&nodesArray[0].ownerDocument||document,container=templateDocument.createElement("div"),i=0,j=nodesArray.length;i<j;i++)container.appendChild(ko.cleanNode(nodesArray[i]));return container},cloneNodes:function(nodesArray,shouldCleanNodes){for(var i=0,j=nodesArray.length,newNodesArray=[];i<j;i++){var clonedNode=nodesArray[i].cloneNode(!0);newNodesArray.push(shouldCleanNodes?ko.cleanNode(clonedNode):clonedNode)}return newNodesArray},setDomNodeChildren:function(domNode,childNodes){if(ko.utils.emptyDomNode(domNode),childNodes)for(var i=0,j=childNodes.length;i<j;i++)domNode.appendChild(childNodes[i])},replaceDomNodes:function(nodeToReplaceOrNodeArray,newNodesArray){var nodesToReplaceArray=nodeToReplaceOrNodeArray.nodeType?[nodeToReplaceOrNodeArray]:nodeToReplaceOrNodeArray;if(nodesToReplaceArray.length>0){for(var insertionPoint=nodesToReplaceArray[0],parent=insertionPoint.parentNode,i=0,j=newNodesArray.length;i<j;i++)parent.insertBefore(newNodesArray[i],insertionPoint);for(var i=0,j=nodesToReplaceArray.length;i<j;i++)ko.removeNode(nodesToReplaceArray[i])}},fixUpContinuousNodeArray:function(continuousNodeArray,parentNode){if(continuousNodeArray.length){for(parentNode=8===parentNode.nodeType&&parentNode.parentNode||parentNode;continuousNodeArray.length&&continuousNodeArray[0].parentNode!==parentNode;)continuousNodeArray.splice(0,1);for(;continuousNodeArray.length>1&&continuousNodeArray[continuousNodeArray.length-1].parentNode!==parentNode;)continuousNodeArray.length--;if(continuousNodeArray.length>1){var current=continuousNodeArray[0],last=continuousNodeArray[continuousNodeArray.length-1];for(continuousNodeArray.length=0;current!==last;)continuousNodeArray.push(current),current=current.nextSibling;continuousNodeArray.push(last)}}return continuousNodeArray},setOptionNodeSelectionState:function(optionNode,isSelected){ieVersion<7?optionNode.setAttribute("selected",isSelected):optionNode.selected=isSelected},stringTrim:function(string){return null===string||string===undefined?"":string.trim?string.trim():string.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringStartsWith:function(string,startsWith){return string=string||"",!(startsWith.length>string.length)&&string.substring(0,startsWith.length)===startsWith},domNodeIsContainedBy:function(node,containedByNode){if(node===containedByNode)return!0;if(11===node.nodeType)return!1;if(containedByNode.contains)return containedByNode.contains(3===node.nodeType?node.parentNode:node);if(containedByNode.compareDocumentPosition)return 16==(16&containedByNode.compareDocumentPosition(node));for(;node&&node!=containedByNode;)node=node.parentNode;return!!node},domNodeIsAttachedToDocument:function(node){return ko.utils.domNodeIsContainedBy(node,node.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(nodes){return!!ko.utils.arrayFirst(nodes,ko.utils.domNodeIsAttachedToDocument)},tagNameLower:function(element){return element&&element.tagName&&element.tagName.toLowerCase()},catchFunctionErrors:function(delegate){return ko.onError?function(){try{return delegate.apply(this,arguments)}catch(e){throw ko.onError&&ko.onError(e),e}}:delegate},setTimeout:function(handler,timeout){return setTimeout(ko.utils.catchFunctionErrors(handler),timeout)},deferError:function(error){setTimeout(function(){throw ko.onError&&ko.onError(error),error},0)},registerEventHandler:function(element,eventType,handler){var wrappedHandler=ko.utils.catchFunctionErrors(handler),mustUseAttachEvent=ieVersion&&eventsThatMustBeRegisteredUsingAttachEvent[eventType];if(ko.options.useOnlyNativeEvents||mustUseAttachEvent||!jQueryInstance)if(mustUseAttachEvent||"function"!=typeof element.addEventListener){if("undefined"==typeof element.attachEvent)throw new Error("Browser doesn't support addEventListener or attachEvent");var attachEventHandler=function(event){wrappedHandler.call(element,event)},attachEventName="on"+eventType;element.attachEvent(attachEventName,attachEventHandler),ko.utils.domNodeDisposal.addDisposeCallback(element,function(){element.detachEvent(attachEventName,attachEventHandler)})}else element.addEventListener(eventType,wrappedHandler,!1);else jQueryInstance(element).bind(eventType,wrappedHandler)},triggerEvent:function(element,eventType){if(!element||!element.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");var useClickWorkaround=isClickOnCheckableElement(element,eventType);if(ko.options.useOnlyNativeEvents||!jQueryInstance||useClickWorkaround)if("function"==typeof document.createEvent){if("function"!=typeof element.dispatchEvent)throw new Error("The supplied element doesn't support dispatchEvent");var eventCategory=knownEventTypesByEventName[eventType]||"HTMLEvents",event=document.createEvent(eventCategory);event.initEvent(eventType,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,element),element.dispatchEvent(event)}else if(useClickWorkaround&&element.click)element.click();else{if("undefined"==typeof element.fireEvent)throw new Error("Browser doesn't support triggering events");element.fireEvent("on"+eventType)}else jQueryInstance(element).trigger(eventType)},unwrapObservable:function(value){return ko.isObservable(value)?value():value},peekObservable:function(value){return ko.isObservable(value)?value.peek():value},toggleDomNodeCssClass:toggleDomNodeCssClass,setTextContent:function(element,textContent){var value=ko.utils.unwrapObservable(textContent);null!==value&&value!==undefined||(value="");var innerTextNode=ko.virtualElements.firstChild(element);!innerTextNode||3!=innerTextNode.nodeType||ko.virtualElements.nextSibling(innerTextNode)?ko.virtualElements.setDomNodeChildren(element,[element.ownerDocument.createTextNode(value)]):innerTextNode.data=value,ko.utils.forceRefresh(element)},setElementName:function(element,name){if(element.name=name,ieVersion<=7)try{element.mergeAttributes(document.createElement("<input name='"+element.name+"'/>"),!1)}catch(e){}},forceRefresh:function(node){if(ieVersion>=9){var elem=1==node.nodeType?node:node.parentNode;elem.style&&(elem.style.zoom=elem.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(selectElement){if(ieVersion){var originalWidth=selectElement.style.width;selectElement.style.width=0,selectElement.style.width=originalWidth}},range:function(min,max){min=ko.utils.unwrapObservable(min),max=ko.utils.unwrapObservable(max);for(var result=[],i=min;i<=max;i++)result.push(i);return result},makeArray:function(arrayLikeObject){for(var result=[],i=0,j=arrayLikeObject.length;i<j;i++)result.push(arrayLikeObject[i]);return result},createSymbolOrString:function(identifier){return canUseSymbols?Symbol(identifier):identifier},isIe6:isIe6,isIe7:isIe7,ieVersion:ieVersion,getFormFields:function(form,fieldName){for(var fields=ko.utils.makeArray(form.getElementsByTagName("input")).concat(ko.utils.makeArray(form.getElementsByTagName("textarea"))),isMatchingField="string"==typeof fieldName?function(field){
return field.name===fieldName}:function(field){return fieldName.test(field.name)},matches=[],i=fields.length-1;i>=0;i--)isMatchingField(fields[i])&&matches.push(fields[i]);return matches},parseJson:function(jsonString){return"string"==typeof jsonString&&(jsonString=ko.utils.stringTrim(jsonString))?JSON&&JSON.parse?JSON.parse(jsonString):new Function("return "+jsonString)():null},stringifyJson:function(data,replacer,space){if(!JSON||!JSON.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return JSON.stringify(ko.utils.unwrapObservable(data),replacer,space)},postJson:function(urlOrForm,data,options){options=options||{};var params=options.params||{},includeFields=options.includeFields||this.fieldsIncludedWithJsonPost,url=urlOrForm;if("object"==typeof urlOrForm&&"form"===ko.utils.tagNameLower(urlOrForm)){var originalForm=urlOrForm;url=originalForm.action;for(var i=includeFields.length-1;i>=0;i--)for(var fields=ko.utils.getFormFields(originalForm,includeFields[i]),j=fields.length-1;j>=0;j--)params[fields[j].name]=fields[j].value}data=ko.utils.unwrapObservable(data);var form=document.createElement("form");form.style.display="none",form.action=url,form.method="post";for(var key in data){var input=document.createElement("input");input.type="hidden",input.name=key,input.value=ko.utils.stringifyJson(ko.utils.unwrapObservable(data[key])),form.appendChild(input)}objectForEach(params,function(key,value){var input=document.createElement("input");input.type="hidden",input.name=key,input.value=value,form.appendChild(input)}),document.body.appendChild(form),options.submitter?options.submitter(form):form.submit(),setTimeout(function(){form.parentNode.removeChild(form)},0)}}}(),ko.exportSymbol("utils",ko.utils),ko.exportSymbol("utils.arrayForEach",ko.utils.arrayForEach),ko.exportSymbol("utils.arrayFirst",ko.utils.arrayFirst),ko.exportSymbol("utils.arrayFilter",ko.utils.arrayFilter),ko.exportSymbol("utils.arrayGetDistinctValues",ko.utils.arrayGetDistinctValues),ko.exportSymbol("utils.arrayIndexOf",ko.utils.arrayIndexOf),ko.exportSymbol("utils.arrayMap",ko.utils.arrayMap),ko.exportSymbol("utils.arrayPushAll",ko.utils.arrayPushAll),ko.exportSymbol("utils.arrayRemoveItem",ko.utils.arrayRemoveItem),ko.exportSymbol("utils.extend",ko.utils.extend),ko.exportSymbol("utils.fieldsIncludedWithJsonPost",ko.utils.fieldsIncludedWithJsonPost),ko.exportSymbol("utils.getFormFields",ko.utils.getFormFields),ko.exportSymbol("utils.peekObservable",ko.utils.peekObservable),ko.exportSymbol("utils.postJson",ko.utils.postJson),ko.exportSymbol("utils.parseJson",ko.utils.parseJson),ko.exportSymbol("utils.registerEventHandler",ko.utils.registerEventHandler),ko.exportSymbol("utils.stringifyJson",ko.utils.stringifyJson),ko.exportSymbol("utils.range",ko.utils.range),ko.exportSymbol("utils.toggleDomNodeCssClass",ko.utils.toggleDomNodeCssClass),ko.exportSymbol("utils.triggerEvent",ko.utils.triggerEvent),ko.exportSymbol("utils.unwrapObservable",ko.utils.unwrapObservable),ko.exportSymbol("utils.objectForEach",ko.utils.objectForEach),ko.exportSymbol("utils.addOrRemoveItem",ko.utils.addOrRemoveItem),ko.exportSymbol("utils.setTextContent",ko.utils.setTextContent),ko.exportSymbol("unwrap",ko.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(object){var originalFunction=this;if(1===arguments.length)return function(){return originalFunction.apply(object,arguments)};var partialArgs=Array.prototype.slice.call(arguments,1);return function(){var args=partialArgs.slice(0);return args.push.apply(args,arguments),originalFunction.apply(object,args)}}),ko.utils.domData=new function(){function getAll(node,createIfNotFound){var dataStoreKey=node[dataStoreKeyExpandoPropertyName],hasExistingDataStore=dataStoreKey&&"null"!==dataStoreKey&&dataStore[dataStoreKey];if(!hasExistingDataStore){if(!createIfNotFound)return undefined;dataStoreKey=node[dataStoreKeyExpandoPropertyName]="ko"+uniqueId++,dataStore[dataStoreKey]={}}return dataStore[dataStoreKey]}var uniqueId=0,dataStoreKeyExpandoPropertyName="__ko__"+(new Date).getTime(),dataStore={};return{get:function(node,key){var allDataForNode=getAll(node,!1);return allDataForNode===undefined?undefined:allDataForNode[key]},set:function(node,key,value){if(value!==undefined||getAll(node,!1)!==undefined){var allDataForNode=getAll(node,!0);allDataForNode[key]=value}},clear:function(node){var dataStoreKey=node[dataStoreKeyExpandoPropertyName];return!!dataStoreKey&&(delete dataStore[dataStoreKey],node[dataStoreKeyExpandoPropertyName]=null,!0)},nextKey:function(){return uniqueId++ +dataStoreKeyExpandoPropertyName}}},ko.exportSymbol("utils.domData",ko.utils.domData),ko.exportSymbol("utils.domData.clear",ko.utils.domData.clear),ko.utils.domNodeDisposal=new function(){function getDisposeCallbacksCollection(node,createIfNotFound){var allDisposeCallbacks=ko.utils.domData.get(node,domDataKey);return allDisposeCallbacks===undefined&&createIfNotFound&&(allDisposeCallbacks=[],ko.utils.domData.set(node,domDataKey,allDisposeCallbacks)),allDisposeCallbacks}function destroyCallbacksCollection(node){ko.utils.domData.set(node,domDataKey,undefined)}function cleanSingleNode(node){var callbacks=getDisposeCallbacksCollection(node,!1);if(callbacks){callbacks=callbacks.slice(0);for(var i=0;i<callbacks.length;i++)callbacks[i](node)}ko.utils.domData.clear(node),ko.utils.domNodeDisposal.cleanExternalData(node),cleanableNodeTypesWithDescendants[node.nodeType]&&cleanImmediateCommentTypeChildren(node)}function cleanImmediateCommentTypeChildren(nodeWithChildren){for(var child,nextChild=nodeWithChildren.firstChild;child=nextChild;)nextChild=child.nextSibling,8===child.nodeType&&cleanSingleNode(child)}var domDataKey=ko.utils.domData.nextKey(),cleanableNodeTypes={1:!0,8:!0,9:!0},cleanableNodeTypesWithDescendants={1:!0,9:!0};return{addDisposeCallback:function(node,callback){if("function"!=typeof callback)throw new Error("Callback must be a function");getDisposeCallbacksCollection(node,!0).push(callback)},removeDisposeCallback:function(node,callback){var callbacksCollection=getDisposeCallbacksCollection(node,!1);callbacksCollection&&(ko.utils.arrayRemoveItem(callbacksCollection,callback),0==callbacksCollection.length&&destroyCallbacksCollection(node))},cleanNode:function(node){if(cleanableNodeTypes[node.nodeType]&&(cleanSingleNode(node),cleanableNodeTypesWithDescendants[node.nodeType])){var descendants=[];ko.utils.arrayPushAll(descendants,node.getElementsByTagName("*"));for(var i=0,j=descendants.length;i<j;i++)cleanSingleNode(descendants[i])}return node},removeNode:function(node){ko.cleanNode(node),node.parentNode&&node.parentNode.removeChild(node)},cleanExternalData:function(node){jQueryInstance&&"function"==typeof jQueryInstance.cleanData&&jQueryInstance.cleanData([node])}}},ko.cleanNode=ko.utils.domNodeDisposal.cleanNode,ko.removeNode=ko.utils.domNodeDisposal.removeNode,ko.exportSymbol("cleanNode",ko.cleanNode),ko.exportSymbol("removeNode",ko.removeNode),ko.exportSymbol("utils.domNodeDisposal",ko.utils.domNodeDisposal),ko.exportSymbol("utils.domNodeDisposal.addDisposeCallback",ko.utils.domNodeDisposal.addDisposeCallback),ko.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",ko.utils.domNodeDisposal.removeDisposeCallback),function(){function getWrap(tags){var m=tags.match(/^<([a-z]+)[ >]/);return m&&lookup[m[1]]||none}function simpleHtmlParse(html,documentContext){documentContext||(documentContext=document);var windowContext=documentContext.parentWindow||documentContext.defaultView||window,tags=ko.utils.stringTrim(html).toLowerCase(),div=documentContext.createElement("div"),wrap=getWrap(tags),depth=wrap[0],markup="ignored<div>"+wrap[1]+html+wrap[2]+"</div>";for("function"==typeof windowContext.innerShiv?div.appendChild(windowContext.innerShiv(markup)):(mayRequireCreateElementHack&&documentContext.appendChild(div),div.innerHTML=markup,mayRequireCreateElementHack&&div.parentNode.removeChild(div));depth--;)div=div.lastChild;return ko.utils.makeArray(div.lastChild.childNodes)}function jQueryHtmlParse(html,documentContext){if(jQueryInstance.parseHTML)return jQueryInstance.parseHTML(html,documentContext)||[];var elems=jQueryInstance.clean([html],documentContext);if(elems&&elems[0]){for(var elem=elems[0];elem.parentNode&&11!==elem.parentNode.nodeType;)elem=elem.parentNode;elem.parentNode&&elem.parentNode.removeChild(elem)}return elems}var none=[0,"",""],table=[1,"<table>","</table>"],tbody=[2,"<table><tbody>","</tbody></table>"],tr=[3,"<table><tbody><tr>","</tr></tbody></table>"],select=[1,"<select multiple='multiple'>","</select>"],lookup={thead:table,tbody:table,tfoot:table,tr:tbody,td:tr,th:tr,option:select,optgroup:select},mayRequireCreateElementHack=ko.utils.ieVersion<=8;ko.utils.parseHtmlFragment=function(html,documentContext){return jQueryInstance?jQueryHtmlParse(html,documentContext):simpleHtmlParse(html,documentContext)},ko.utils.setHtml=function(node,html){if(ko.utils.emptyDomNode(node),html=ko.utils.unwrapObservable(html),null!==html&&html!==undefined)if("string"!=typeof html&&(html=html.toString()),jQueryInstance)jQueryInstance(node).html(html);else for(var parsedNodes=ko.utils.parseHtmlFragment(html,node.ownerDocument),i=0;i<parsedNodes.length;i++)node.appendChild(parsedNodes[i])}}(),ko.exportSymbol("utils.parseHtmlFragment",ko.utils.parseHtmlFragment),ko.exportSymbol("utils.setHtml",ko.utils.setHtml),ko.memoization=function(){function randomMax8HexChars(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}function generateRandomId(){return randomMax8HexChars()+randomMax8HexChars()}function findMemoNodes(rootNode,appendToArray){if(rootNode)if(8==rootNode.nodeType){var memoId=ko.memoization.parseMemoText(rootNode.nodeValue);null!=memoId&&appendToArray.push({domNode:rootNode,memoId:memoId})}else if(1==rootNode.nodeType)for(var i=0,childNodes=rootNode.childNodes,j=childNodes.length;i<j;i++)findMemoNodes(childNodes[i],appendToArray)}var memos={};return{memoize:function(callback){if("function"!=typeof callback)throw new Error("You can only pass a function to ko.memoization.memoize()");var memoId=generateRandomId();return memos[memoId]=callback,"<!--[ko_memo:"+memoId+"]-->"},unmemoize:function(memoId,callbackParams){var callback=memos[memoId];if(callback===undefined)throw new Error("Couldn't find any memo with ID "+memoId+". Perhaps it's already been unmemoized.");try{return callback.apply(null,callbackParams||[]),!0}finally{delete memos[memoId]}},unmemoizeDomNodeAndDescendants:function(domNode,extraCallbackParamsArray){var memos=[];findMemoNodes(domNode,memos);for(var i=0,j=memos.length;i<j;i++){var node=memos[i].domNode,combinedParams=[node];extraCallbackParamsArray&&ko.utils.arrayPushAll(combinedParams,extraCallbackParamsArray),ko.memoization.unmemoize(memos[i].memoId,combinedParams),node.nodeValue="",node.parentNode&&node.parentNode.removeChild(node)}},parseMemoText:function(memoText){var match=memoText.match(/^\[ko_memo\:(.*?)\]$/);return match?match[1]:null}}}(),ko.exportSymbol("memoization",ko.memoization),ko.exportSymbol("memoization.memoize",ko.memoization.memoize),ko.exportSymbol("memoization.unmemoize",ko.memoization.unmemoize),ko.exportSymbol("memoization.parseMemoText",ko.memoization.parseMemoText),ko.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",ko.memoization.unmemoizeDomNodeAndDescendants),ko.tasks=function(){function processTasks(){if(taskQueueLength)for(var task,mark=taskQueueLength,countMarks=0;nextIndexToProcess<taskQueueLength;)if(task=taskQueue[nextIndexToProcess++]){if(nextIndexToProcess>mark){if(++countMarks>=5e3){nextIndexToProcess=taskQueueLength,ko.utils.deferError(Error("'Too much recursion' after processing "+countMarks+" task groups."));break}mark=taskQueueLength}try{task()}catch(ex){ko.utils.deferError(ex)}}}function scheduledProcess(){processTasks(),nextIndexToProcess=taskQueueLength=taskQueue.length=0}function scheduleTaskProcessing(){ko.tasks.scheduler(scheduledProcess)}var scheduler,taskQueue=[],taskQueueLength=0,nextHandle=1,nextIndexToProcess=0;scheduler=window.MutationObserver?function(callback){var div=document.createElement("div");return new MutationObserver(callback).observe(div,{attributes:!0}),function(){div.classList.toggle("foo")}}(scheduledProcess):document&&"onreadystatechange"in document.createElement("script")?function(callback){var script=document.createElement("script");script.onreadystatechange=function(){script.onreadystatechange=null,document.documentElement.removeChild(script),script=null,callback()},document.documentElement.appendChild(script)}:function(callback){setTimeout(callback,0)};var tasks={scheduler:scheduler,schedule:function(func){return taskQueueLength||scheduleTaskProcessing(),taskQueue[taskQueueLength++]=func,nextHandle++},cancel:function(handle){var index=handle-(nextHandle-taskQueueLength);index>=nextIndexToProcess&&index<taskQueueLength&&(taskQueue[index]=null)},resetForTesting:function(){var length=taskQueueLength-nextIndexToProcess;return nextIndexToProcess=taskQueueLength=taskQueue.length=0,length},runEarly:processTasks};return tasks}(),ko.exportSymbol("tasks",ko.tasks),ko.exportSymbol("tasks.schedule",ko.tasks.schedule),ko.exportSymbol("tasks.runEarly",ko.tasks.runEarly),ko.extenders={throttle:function(target,timeout){target.throttleEvaluation=timeout;var writeTimeoutInstance=null;return ko.dependentObservable({read:target,write:function(value){clearTimeout(writeTimeoutInstance),writeTimeoutInstance=ko.utils.setTimeout(function(){target(value)},timeout)}})},rateLimit:function(target,options){var timeout,method,limitFunction;"number"==typeof options?timeout=options:(timeout=options.timeout,method=options.method),target._deferUpdates=!1,limitFunction="notifyWhenChangesStop"==method?debounce:throttle,target.limit(function(callback){return limitFunction(callback,timeout)})},deferred:function(target,options){if(options!==!0)throw new Error("The 'deferred' extender only accepts the value 'true', because it is not supported to turn deferral off once enabled.");target._deferUpdates||(target._deferUpdates=!0,target.limit(function(callback){var handle;return function(){ko.tasks.cancel(handle),handle=ko.tasks.schedule(callback),target.notifySubscribers(undefined,"dirty")}}))},notify:function(target,notifyWhen){target.equalityComparer="always"==notifyWhen?null:valuesArePrimitiveAndEqual}};var primitiveTypes={undefined:1,boolean:1,number:1,string:1};ko.exportSymbol("extenders",ko.extenders),ko.subscription=function(target,callback,disposeCallback){this._target=target,this.callback=callback,this.disposeCallback=disposeCallback,this.isDisposed=!1,ko.exportProperty(this,"dispose",this.dispose)},ko.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},ko.subscribable=function(){ko.utils.setPrototypeOfOrExtend(this,ko_subscribable_fn),ko_subscribable_fn.init(this)};var defaultEvent="change",ko_subscribable_fn={init:function(instance){instance._subscriptions={},instance._versionNumber=1},subscribe:function(callback,callbackTarget,event){var self=this;event=event||defaultEvent;var boundCallback=callbackTarget?callback.bind(callbackTarget):callback,subscription=new ko.subscription(self,boundCallback,function(){ko.utils.arrayRemoveItem(self._subscriptions[event],subscription),self.afterSubscriptionRemove&&self.afterSubscriptionRemove(event)});return self.beforeSubscriptionAdd&&self.beforeSubscriptionAdd(event),self._subscriptions[event]||(self._subscriptions[event]=[]),self._subscriptions[event].push(subscription),subscription},notifySubscribers:function(valueToNotify,event){if(event=event||defaultEvent,event===defaultEvent&&this.updateVersion(),this.hasSubscriptionsForEvent(event))try{ko.dependencyDetection.begin();for(var subscription,a=this._subscriptions[event].slice(0),i=0;subscription=a[i];++i)subscription.isDisposed||subscription.callback(valueToNotify)}finally{ko.dependencyDetection.end()}},getVersion:function(){return this._versionNumber},hasChanged:function(versionToCheck){return this.getVersion()!==versionToCheck},updateVersion:function(){++this._versionNumber},limit:function(limitFunction){var ignoreBeforeChange,previousValue,pendingValue,self=this,selfIsObservable=ko.isObservable(self),beforeChange="beforeChange";self._origNotifySubscribers||(self._origNotifySubscribers=self.notifySubscribers,self.notifySubscribers=limitNotifySubscribers);var finish=limitFunction(function(){self._notificationIsPending=!1,selfIsObservable&&pendingValue===self&&(pendingValue=self()),ignoreBeforeChange=!1,self.isDifferent(previousValue,pendingValue)&&self._origNotifySubscribers(previousValue=pendingValue)});self._limitChange=function(value){self._notificationIsPending=ignoreBeforeChange=!0,pendingValue=value,finish()},self._limitBeforeChange=function(value){ignoreBeforeChange||(previousValue=value,self._origNotifySubscribers(value,beforeChange))}},hasSubscriptionsForEvent:function(event){return this._subscriptions[event]&&this._subscriptions[event].length},getSubscriptionsCount:function(event){if(event)return this._subscriptions[event]&&this._subscriptions[event].length||0;var total=0;return ko.utils.objectForEach(this._subscriptions,function(eventName,subscriptions){"dirty"!==eventName&&(total+=subscriptions.length)}),total},isDifferent:function(oldValue,newValue){return!this.equalityComparer||!this.equalityComparer(oldValue,newValue)},extend:applyExtenders};ko.exportProperty(ko_subscribable_fn,"subscribe",ko_subscribable_fn.subscribe),ko.exportProperty(ko_subscribable_fn,"extend",ko_subscribable_fn.extend),ko.exportProperty(ko_subscribable_fn,"getSubscriptionsCount",ko_subscribable_fn.getSubscriptionsCount),ko.utils.canSetPrototype&&ko.utils.setPrototypeOf(ko_subscribable_fn,Function.prototype),ko.subscribable.fn=ko_subscribable_fn,ko.isSubscribable=function(instance){return null!=instance&&"function"==typeof instance.subscribe&&"function"==typeof instance.notifySubscribers},ko.exportSymbol("subscribable",ko.subscribable),ko.exportSymbol("isSubscribable",ko.isSubscribable),ko.computedContext=ko.dependencyDetection=function(){function getId(){return++lastId}function begin(options){outerFrames.push(currentFrame),currentFrame=options}function end(){currentFrame=outerFrames.pop()}var currentFrame,outerFrames=[],lastId=0;return{begin:begin,end:end,registerDependency:function(subscribable){if(currentFrame){if(!ko.isSubscribable(subscribable))throw new Error("Only subscribable things can act as dependencies");currentFrame.callback.call(currentFrame.callbackTarget,subscribable,subscribable._id||(subscribable._id=getId()))}},ignore:function(callback,callbackTarget,callbackArgs){try{return begin(),callback.apply(callbackTarget,callbackArgs||[])}finally{end()}},getDependenciesCount:function(){if(currentFrame)return currentFrame.computed.getDependenciesCount()},isInitial:function(){if(currentFrame)return currentFrame.isInitial}}}(),ko.exportSymbol("computedContext",ko.computedContext),ko.exportSymbol("computedContext.getDependenciesCount",ko.computedContext.getDependenciesCount),ko.exportSymbol("computedContext.isInitial",ko.computedContext.isInitial),ko.exportSymbol("ignoreDependencies",ko.ignoreDependencies=ko.dependencyDetection.ignore);var observableLatestValue=ko.utils.createSymbolOrString("_latestValue");ko.observable=function(initialValue){function observable(){return arguments.length>0?(observable.isDifferent(observable[observableLatestValue],arguments[0])&&(observable.valueWillMutate(),observable[observableLatestValue]=arguments[0],observable.valueHasMutated()),this):(ko.dependencyDetection.registerDependency(observable),observable[observableLatestValue])}return observable[observableLatestValue]=initialValue,ko.utils.canSetPrototype||ko.utils.extend(observable,ko.subscribable.fn),ko.subscribable.fn.init(observable),ko.utils.setPrototypeOfOrExtend(observable,observableFn),ko.options.deferUpdates&&ko.extenders.deferred(observable,!0),observable};var observableFn={equalityComparer:valuesArePrimitiveAndEqual,peek:function(){return this[observableLatestValue]},valueHasMutated:function(){this.notifySubscribers(this[observableLatestValue])},valueWillMutate:function(){this.notifySubscribers(this[observableLatestValue],"beforeChange")}};ko.utils.canSetPrototype&&ko.utils.setPrototypeOf(observableFn,ko.subscribable.fn);var protoProperty=ko.observable.protoProperty="__ko_proto__";observableFn[protoProperty]=ko.observable,ko.hasPrototype=function(instance,prototype){return null!==instance&&instance!==undefined&&instance[protoProperty]!==undefined&&(instance[protoProperty]===prototype||ko.hasPrototype(instance[protoProperty],prototype))},ko.isObservable=function(instance){return ko.hasPrototype(instance,ko.observable)},ko.isWriteableObservable=function(instance){return"function"==typeof instance&&instance[protoProperty]===ko.observable||!("function"!=typeof instance||instance[protoProperty]!==ko.dependentObservable||!instance.hasWriteFunction)},ko.exportSymbol("observable",ko.observable),ko.exportSymbol("isObservable",ko.isObservable),ko.exportSymbol("isWriteableObservable",ko.isWriteableObservable),ko.exportSymbol("isWritableObservable",ko.isWriteableObservable),ko.exportSymbol("observable.fn",observableFn),ko.exportProperty(observableFn,"peek",observableFn.peek),ko.exportProperty(observableFn,"valueHasMutated",observableFn.valueHasMutated),ko.exportProperty(observableFn,"valueWillMutate",observableFn.valueWillMutate),ko.observableArray=function(initialValues){if(initialValues=initialValues||[],"object"!=typeof initialValues||!("length"in initialValues))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var result=ko.observable(initialValues);return ko.utils.setPrototypeOfOrExtend(result,ko.observableArray.fn),result.extend({trackArrayChanges:!0})},ko.observableArray.fn={remove:function(valueOrPredicate){for(var underlyingArray=this.peek(),removedValues=[],predicate="function"!=typeof valueOrPredicate||ko.isObservable(valueOrPredicate)?function(value){return value===valueOrPredicate}:valueOrPredicate,i=0;i<underlyingArray.length;i++){var value=underlyingArray[i];predicate(value)&&(0===removedValues.length&&this.valueWillMutate(),removedValues.push(value),underlyingArray.splice(i,1),i--)}return removedValues.length&&this.valueHasMutated(),removedValues},removeAll:function(arrayOfValues){if(arrayOfValues===undefined){var underlyingArray=this.peek(),allValues=underlyingArray.slice(0);return this.valueWillMutate(),underlyingArray.splice(0,underlyingArray.length),this.valueHasMutated(),allValues}return arrayOfValues?this.remove(function(value){return ko.utils.arrayIndexOf(arrayOfValues,value)>=0}):[]},destroy:function(valueOrPredicate){var underlyingArray=this.peek(),predicate="function"!=typeof valueOrPredicate||ko.isObservable(valueOrPredicate)?function(value){return value===valueOrPredicate}:valueOrPredicate;this.valueWillMutate();for(var i=underlyingArray.length-1;i>=0;i--){var value=underlyingArray[i];predicate(value)&&(underlyingArray[i]._destroy=!0)}this.valueHasMutated()},destroyAll:function(arrayOfValues){return arrayOfValues===undefined?this.destroy(function(){return!0}):arrayOfValues?this.destroy(function(value){return ko.utils.arrayIndexOf(arrayOfValues,value)>=0}):[]},indexOf:function(item){var underlyingArray=this();return ko.utils.arrayIndexOf(underlyingArray,item)},replace:function(oldItem,newItem){var index=this.indexOf(oldItem);index>=0&&(this.valueWillMutate(),this.peek()[index]=newItem,this.valueHasMutated())}},ko.utils.canSetPrototype&&ko.utils.setPrototypeOf(ko.observableArray.fn,ko.observable.fn),ko.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(methodName){ko.observableArray.fn[methodName]=function(){var underlyingArray=this.peek();this.valueWillMutate(),this.cacheDiffForKnownOperation(underlyingArray,methodName,arguments);var methodCallResult=underlyingArray[methodName].apply(underlyingArray,arguments);return this.valueHasMutated(),methodCallResult===underlyingArray?this:methodCallResult}}),ko.utils.arrayForEach(["slice"],function(methodName){ko.observableArray.fn[methodName]=function(){var underlyingArray=this();return underlyingArray[methodName].apply(underlyingArray,arguments)}}),ko.exportSymbol("observableArray",ko.observableArray);var arrayChangeEventName="arrayChange";ko.extenders.trackArrayChanges=function(target,options){function trackChanges(){if(!trackingChanges){trackingChanges=!0;var underlyingNotifySubscribersFunction=target.notifySubscribers;target.notifySubscribers=function(valueToNotify,event){return event&&event!==defaultEvent||++pendingNotifications,underlyingNotifySubscribersFunction.apply(this,arguments)};var previousContents=[].concat(target.peek()||[]);cachedDiff=null,arrayChangeSubscription=target.subscribe(function(currentContents){if(currentContents=[].concat(currentContents||[]),target.hasSubscriptionsForEvent(arrayChangeEventName))var changes=getChanges(previousContents,currentContents);previousContents=currentContents,cachedDiff=null,pendingNotifications=0,changes&&changes.length&&target.notifySubscribers(changes,arrayChangeEventName)})}}function getChanges(previousContents,currentContents){return(!cachedDiff||pendingNotifications>1)&&(cachedDiff=ko.utils.compareArrays(previousContents,currentContents,target.compareArrayOptions)),cachedDiff}if(target.compareArrayOptions={},options&&"object"==typeof options&&ko.utils.extend(target.compareArrayOptions,options),target.compareArrayOptions.sparse=!0,!target.cacheDiffForKnownOperation){var arrayChangeSubscription,trackingChanges=!1,cachedDiff=null,pendingNotifications=0,underlyingBeforeSubscriptionAddFunction=target.beforeSubscriptionAdd,underlyingAfterSubscriptionRemoveFunction=target.afterSubscriptionRemove;target.beforeSubscriptionAdd=function(event){underlyingBeforeSubscriptionAddFunction&&underlyingBeforeSubscriptionAddFunction.call(target,event),event===arrayChangeEventName&&trackChanges()},target.afterSubscriptionRemove=function(event){underlyingAfterSubscriptionRemoveFunction&&underlyingAfterSubscriptionRemoveFunction.call(target,event),event!==arrayChangeEventName||target.hasSubscriptionsForEvent(arrayChangeEventName)||(arrayChangeSubscription.dispose(),trackingChanges=!1)},target.cacheDiffForKnownOperation=function(rawArray,operationName,args){function pushDiff(status,value,index){return diff[diff.length]={status:status,value:value,index:index}}if(trackingChanges&&!pendingNotifications){var diff=[],arrayLength=rawArray.length,argsLength=args.length,offset=0;switch(operationName){case"push":offset=arrayLength;case"unshift":for(var index=0;index<argsLength;index++)pushDiff("added",args[index],offset+index);break;case"pop":offset=arrayLength-1;case"shift":arrayLength&&pushDiff("deleted",rawArray[offset],offset);break;case"splice":for(var startIndex=Math.min(Math.max(0,args[0]<0?arrayLength+args[0]:args[0]),arrayLength),endDeleteIndex=1===argsLength?arrayLength:Math.min(startIndex+(args[1]||0),arrayLength),endAddIndex=startIndex+argsLength-2,endIndex=Math.max(endDeleteIndex,endAddIndex),additions=[],deletions=[],index=startIndex,argsIndex=2;index<endIndex;++index,++argsIndex)index<endDeleteIndex&&deletions.push(pushDiff("deleted",rawArray[index],index)),index<endAddIndex&&additions.push(pushDiff("added",args[argsIndex],index));ko.utils.findMovesInArrayComparison(deletions,additions);break;default:return}cachedDiff=diff}}}};var computedState=ko.utils.createSymbolOrString("_state");ko.computed=ko.dependentObservable=function(evaluatorFunctionOrOptions,evaluatorFunctionTarget,options){function computedObservable(){if(arguments.length>0){if("function"!=typeof writeFunction)throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return writeFunction.apply(state.evaluatorFunctionTarget,arguments),this}return ko.dependencyDetection.registerDependency(computedObservable),(state.isStale||state.isSleeping&&computedObservable.haveDependenciesChanged())&&computedObservable.evaluateImmediate(),state.latestValue}if("object"==typeof evaluatorFunctionOrOptions?options=evaluatorFunctionOrOptions:(options=options||{},evaluatorFunctionOrOptions&&(options.read=evaluatorFunctionOrOptions)),"function"!=typeof options.read)throw Error("Pass a function that returns the value of the ko.computed");var writeFunction=options.write,state={latestValue:undefined,isStale:!0,isBeingEvaluated:!1,suppressDisposalUntilDisposeWhenReturnsFalse:!1,isDisposed:!1,pure:!1,isSleeping:!1,readFunction:options.read,evaluatorFunctionTarget:evaluatorFunctionTarget||options.owner,disposeWhenNodeIsRemoved:options.disposeWhenNodeIsRemoved||options.disposeWhenNodeIsRemoved||null,disposeWhen:options.disposeWhen||options.disposeWhen,domNodeDisposalCallback:null,dependencyTracking:{},dependenciesCount:0,evaluationTimeoutInstance:null};return computedObservable[computedState]=state,computedObservable.hasWriteFunction="function"==typeof writeFunction,ko.utils.canSetPrototype||ko.utils.extend(computedObservable,ko.subscribable.fn),ko.subscribable.fn.init(computedObservable),ko.utils.setPrototypeOfOrExtend(computedObservable,computedFn),options.pure?(state.pure=!0,state.isSleeping=!0,ko.utils.extend(computedObservable,pureComputedOverrides)):options.deferEvaluation&&ko.utils.extend(computedObservable,deferEvaluationOverrides),ko.options.deferUpdates&&ko.extenders.deferred(computedObservable,!0),DEBUG&&(computedObservable._options=options),state.disposeWhenNodeIsRemoved&&(state.suppressDisposalUntilDisposeWhenReturnsFalse=!0,state.disposeWhenNodeIsRemoved.nodeType||(state.disposeWhenNodeIsRemoved=null)),state.isSleeping||options.deferEvaluation||computedObservable.evaluateImmediate(),state.disposeWhenNodeIsRemoved&&computedObservable.isActive()&&ko.utils.domNodeDisposal.addDisposeCallback(state.disposeWhenNodeIsRemoved,state.domNodeDisposalCallback=function(){computedObservable.dispose()}),computedObservable};var computedFn={equalityComparer:valuesArePrimitiveAndEqual,getDependenciesCount:function(){return this[computedState].dependenciesCount},addDependencyTracking:function(id,target,trackingObj){if(this[computedState].pure&&target===this)throw Error("A 'pure' computed must not be called recursively");this[computedState].dependencyTracking[id]=trackingObj,trackingObj._order=this[computedState].dependenciesCount++,trackingObj._version=target.getVersion()},haveDependenciesChanged:function(){var id,dependency,dependencyTracking=this[computedState].dependencyTracking;for(id in dependencyTracking)if(dependencyTracking.hasOwnProperty(id)&&(dependency=dependencyTracking[id],dependency._target.hasChanged(dependency._version)))return!0},markDirty:function(){this._evalDelayed&&!this[computedState].isBeingEvaluated&&this._evalDelayed()},isActive:function(){return this[computedState].isStale||this[computedState].dependenciesCount>0},respondToChange:function(){this._notificationIsPending||this.evaluatePossiblyAsync()},subscribeToDependency:function(target){if(target._deferUpdates&&!this[computedState].disposeWhenNodeIsRemoved){var dirtySub=target.subscribe(this.markDirty,this,"dirty"),changeSub=target.subscribe(this.respondToChange,this);return{_target:target,dispose:function(){dirtySub.dispose(),changeSub.dispose()}}}return target.subscribe(this.evaluatePossiblyAsync,this)},evaluatePossiblyAsync:function(){var computedObservable=this,throttleEvaluationTimeout=computedObservable.throttleEvaluation;throttleEvaluationTimeout&&throttleEvaluationTimeout>=0?(clearTimeout(this[computedState].evaluationTimeoutInstance),this[computedState].evaluationTimeoutInstance=ko.utils.setTimeout(function(){computedObservable.evaluateImmediate(!0)},throttleEvaluationTimeout)):computedObservable._evalDelayed?computedObservable._evalDelayed():computedObservable.evaluateImmediate(!0);
},evaluateImmediate:function(notifyChange){var computedObservable=this,state=computedObservable[computedState],disposeWhen=state.disposeWhen;if(!state.isBeingEvaluated&&!state.isDisposed){if(state.disposeWhenNodeIsRemoved&&!ko.utils.domNodeIsAttachedToDocument(state.disposeWhenNodeIsRemoved)||disposeWhen&&disposeWhen()){if(!state.suppressDisposalUntilDisposeWhenReturnsFalse)return void computedObservable.dispose()}else state.suppressDisposalUntilDisposeWhenReturnsFalse=!1;state.isBeingEvaluated=!0;try{this.evaluateImmediate_CallReadWithDependencyDetection(notifyChange)}finally{state.isBeingEvaluated=!1}state.dependenciesCount||computedObservable.dispose()}},evaluateImmediate_CallReadWithDependencyDetection:function(notifyChange){var computedObservable=this,state=computedObservable[computedState],isInitial=state.pure?undefined:!state.dependenciesCount,dependencyDetectionContext={computedObservable:computedObservable,disposalCandidates:state.dependencyTracking,disposalCount:state.dependenciesCount};ko.dependencyDetection.begin({callbackTarget:dependencyDetectionContext,callback:computedBeginDependencyDetectionCallback,computed:computedObservable,isInitial:isInitial}),state.dependencyTracking={},state.dependenciesCount=0;var newValue=this.evaluateImmediate_CallReadThenEndDependencyDetection(state,dependencyDetectionContext);computedObservable.isDifferent(state.latestValue,newValue)&&(state.isSleeping||computedObservable.notifySubscribers(state.latestValue,"beforeChange"),state.latestValue=newValue,state.isSleeping?computedObservable.updateVersion():notifyChange&&computedObservable.notifySubscribers(state.latestValue)),isInitial&&computedObservable.notifySubscribers(state.latestValue,"awake")},evaluateImmediate_CallReadThenEndDependencyDetection:function(state,dependencyDetectionContext){try{var readFunction=state.readFunction;return state.evaluatorFunctionTarget?readFunction.call(state.evaluatorFunctionTarget):readFunction()}finally{ko.dependencyDetection.end(),dependencyDetectionContext.disposalCount&&!state.isSleeping&&ko.utils.objectForEach(dependencyDetectionContext.disposalCandidates,computedDisposeDependencyCallback),state.isStale=!1}},peek:function(){var state=this[computedState];return(state.isStale&&!state.dependenciesCount||state.isSleeping&&this.haveDependenciesChanged())&&this.evaluateImmediate(),state.latestValue},limit:function(limitFunction){ko.subscribable.fn.limit.call(this,limitFunction),this._evalDelayed=function(){this._limitBeforeChange(this[computedState].latestValue),this[computedState].isStale=!0,this._limitChange(this)}},dispose:function(){var state=this[computedState];!state.isSleeping&&state.dependencyTracking&&ko.utils.objectForEach(state.dependencyTracking,function(id,dependency){dependency.dispose&&dependency.dispose()}),state.disposeWhenNodeIsRemoved&&state.domNodeDisposalCallback&&ko.utils.domNodeDisposal.removeDisposeCallback(state.disposeWhenNodeIsRemoved,state.domNodeDisposalCallback),state.dependencyTracking=null,state.dependenciesCount=0,state.isDisposed=!0,state.isStale=!1,state.isSleeping=!1,state.disposeWhenNodeIsRemoved=null}},pureComputedOverrides={beforeSubscriptionAdd:function(event){var computedObservable=this,state=computedObservable[computedState];if(!state.isDisposed&&state.isSleeping&&"change"==event){if(state.isSleeping=!1,state.isStale||computedObservable.haveDependenciesChanged())state.dependencyTracking=null,state.dependenciesCount=0,state.isStale=!0,computedObservable.evaluateImmediate();else{var dependeciesOrder=[];ko.utils.objectForEach(state.dependencyTracking,function(id,dependency){dependeciesOrder[dependency._order]=id}),ko.utils.arrayForEach(dependeciesOrder,function(id,order){var dependency=state.dependencyTracking[id],subscription=computedObservable.subscribeToDependency(dependency._target);subscription._order=order,subscription._version=dependency._version,state.dependencyTracking[id]=subscription})}state.isDisposed||computedObservable.notifySubscribers(state.latestValue,"awake")}},afterSubscriptionRemove:function(event){var state=this[computedState];state.isDisposed||"change"!=event||this.hasSubscriptionsForEvent("change")||(ko.utils.objectForEach(state.dependencyTracking,function(id,dependency){dependency.dispose&&(state.dependencyTracking[id]={_target:dependency._target,_order:dependency._order,_version:dependency._version},dependency.dispose())}),state.isSleeping=!0,this.notifySubscribers(undefined,"asleep"))},getVersion:function(){var state=this[computedState];return state.isSleeping&&(state.isStale||this.haveDependenciesChanged())&&this.evaluateImmediate(),ko.subscribable.fn.getVersion.call(this)}},deferEvaluationOverrides={beforeSubscriptionAdd:function(event){"change"!=event&&"beforeChange"!=event||this.peek()}};ko.utils.canSetPrototype&&ko.utils.setPrototypeOf(computedFn,ko.subscribable.fn);var protoProp=ko.observable.protoProperty;ko.computed[protoProp]=ko.observable,computedFn[protoProp]=ko.computed,ko.isComputed=function(instance){return ko.hasPrototype(instance,ko.computed)},ko.isPureComputed=function(instance){return ko.hasPrototype(instance,ko.computed)&&instance[computedState]&&instance[computedState].pure},ko.exportSymbol("computed",ko.computed),ko.exportSymbol("dependentObservable",ko.computed),ko.exportSymbol("isComputed",ko.isComputed),ko.exportSymbol("isPureComputed",ko.isPureComputed),ko.exportSymbol("computed.fn",computedFn),ko.exportProperty(computedFn,"peek",computedFn.peek),ko.exportProperty(computedFn,"dispose",computedFn.dispose),ko.exportProperty(computedFn,"isActive",computedFn.isActive),ko.exportProperty(computedFn,"getDependenciesCount",computedFn.getDependenciesCount),ko.pureComputed=function(evaluatorFunctionOrOptions,evaluatorFunctionTarget){return"function"==typeof evaluatorFunctionOrOptions?ko.computed(evaluatorFunctionOrOptions,evaluatorFunctionTarget,{pure:!0}):(evaluatorFunctionOrOptions=ko.utils.extend({},evaluatorFunctionOrOptions),evaluatorFunctionOrOptions.pure=!0,ko.computed(evaluatorFunctionOrOptions,evaluatorFunctionTarget))},ko.exportSymbol("pureComputed",ko.pureComputed),function(){function mapJsObjectGraph(rootObject,mapInputCallback,visitedObjects){visitedObjects=visitedObjects||new objectLookup,rootObject=mapInputCallback(rootObject);var canHaveProperties=!("object"!=typeof rootObject||null===rootObject||rootObject===undefined||rootObject instanceof RegExp||rootObject instanceof Date||rootObject instanceof String||rootObject instanceof Number||rootObject instanceof Boolean);if(!canHaveProperties)return rootObject;var outputProperties=rootObject instanceof Array?[]:{};return visitedObjects.save(rootObject,outputProperties),visitPropertiesOrArrayEntries(rootObject,function(indexer){var propertyValue=mapInputCallback(rootObject[indexer]);switch(typeof propertyValue){case"boolean":case"number":case"string":case"function":outputProperties[indexer]=propertyValue;break;case"object":case"undefined":var previouslyMappedValue=visitedObjects.get(propertyValue);outputProperties[indexer]=previouslyMappedValue!==undefined?previouslyMappedValue:mapJsObjectGraph(propertyValue,mapInputCallback,visitedObjects)}}),outputProperties}function visitPropertiesOrArrayEntries(rootObject,visitorCallback){if(rootObject instanceof Array){for(var i=0;i<rootObject.length;i++)visitorCallback(i);"function"==typeof rootObject.toJSON&&visitorCallback("toJSON")}else for(var propertyName in rootObject)visitorCallback(propertyName)}function objectLookup(){this.keys=[],this.values=[]}var maxNestedObservableDepth=10;ko.toJS=function(rootObject){if(0==arguments.length)throw new Error("When calling ko.toJS, pass the object you want to convert.");return mapJsObjectGraph(rootObject,function(valueToMap){for(var i=0;ko.isObservable(valueToMap)&&i<maxNestedObservableDepth;i++)valueToMap=valueToMap();return valueToMap})},ko.toJSON=function(rootObject,replacer,space){var plainJavaScriptObject=ko.toJS(rootObject);return ko.utils.stringifyJson(plainJavaScriptObject,replacer,space)},objectLookup.prototype={constructor:objectLookup,save:function(key,value){var existingIndex=ko.utils.arrayIndexOf(this.keys,key);existingIndex>=0?this.values[existingIndex]=value:(this.keys.push(key),this.values.push(value))},get:function(key){var existingIndex=ko.utils.arrayIndexOf(this.keys,key);return existingIndex>=0?this.values[existingIndex]:undefined}}}(),ko.exportSymbol("toJS",ko.toJS),ko.exportSymbol("toJSON",ko.toJSON),function(){var hasDomDataExpandoProperty="__ko__hasDomDataOptionValue__";ko.selectExtensions={readValue:function(element){switch(ko.utils.tagNameLower(element)){case"option":return element[hasDomDataExpandoProperty]===!0?ko.utils.domData.get(element,ko.bindingHandlers.options.optionValueDomDataKey):ko.utils.ieVersion<=7?element.getAttributeNode("value")&&element.getAttributeNode("value").specified?element.value:element.text:element.value;case"select":return element.selectedIndex>=0?ko.selectExtensions.readValue(element.options[element.selectedIndex]):undefined;default:return element.value}},writeValue:function(element,value,allowUnset){switch(ko.utils.tagNameLower(element)){case"option":switch(typeof value){case"string":ko.utils.domData.set(element,ko.bindingHandlers.options.optionValueDomDataKey,undefined),hasDomDataExpandoProperty in element&&delete element[hasDomDataExpandoProperty],element.value=value;break;default:ko.utils.domData.set(element,ko.bindingHandlers.options.optionValueDomDataKey,value),element[hasDomDataExpandoProperty]=!0,element.value="number"==typeof value?value:""}break;case"select":""!==value&&null!==value||(value=undefined);for(var optionValue,selection=-1,i=0,n=element.options.length;i<n;++i)if(optionValue=ko.selectExtensions.readValue(element.options[i]),optionValue==value||""==optionValue&&value===undefined){selection=i;break}(allowUnset||selection>=0||value===undefined&&element.size>1)&&(element.selectedIndex=selection);break;default:null!==value&&value!==undefined||(value=""),element.value=value}}}}(),ko.exportSymbol("selectExtensions",ko.selectExtensions),ko.exportSymbol("selectExtensions.readValue",ko.selectExtensions.readValue),ko.exportSymbol("selectExtensions.writeValue",ko.selectExtensions.writeValue),ko.expressionRewriting=function(){function getWriteableValue(expression){if(ko.utils.arrayIndexOf(javaScriptReservedWords,expression)>=0)return!1;var match=expression.match(javaScriptAssignmentTarget);return null!==match&&(match[1]?"Object("+match[1]+")"+match[2]:expression)}function parseObjectLiteral(objectLiteralString){var str=ko.utils.stringTrim(objectLiteralString);123===str.charCodeAt(0)&&(str=str.slice(1,-1));var key,result=[],toks=str.match(bindingToken),values=[],depth=0;if(toks){toks.push(",");for(var tok,i=0;tok=toks[i];++i){var c=tok.charCodeAt(0);if(44===c){if(depth<=0){result.push(key&&values.length?{key:key,value:values.join("")}:{unknown:key||values.join("")}),key=depth=0,values=[];continue}}else if(58===c){if(!depth&&!key&&1===values.length){key=values.pop();continue}}else if(47===c&&i&&tok.length>1){var match=toks[i-1].match(divisionLookBehind);match&&!keywordRegexLookBehind[match[0]]&&(str=str.substr(str.indexOf(tok)+1),toks=str.match(bindingToken),toks.push(","),i=-1,tok="/")}else 40===c||123===c||91===c?++depth:41===c||125===c||93===c?--depth:key||values.length||34!==c&&39!==c||(tok=tok.slice(1,-1));values.push(tok)}}return result}function preProcessBindings(bindingsStringOrKeyValueArray,bindingOptions){function processKeyValue(key,val){function callPreprocessHook(obj){return!obj||!obj.preprocess||(val=obj.preprocess(val,key,processKeyValue))}var writableVal;if(!bindingParams){if(!callPreprocessHook(ko.getBindingHandler(key)))return;twoWayBindings[key]&&(writableVal=getWriteableValue(val))&&propertyAccessorResultStrings.push("'"+key+"':function(_z){"+writableVal+"=_z}")}makeValueAccessors&&(val="function(){return "+val+" }"),resultStrings.push("'"+key+"':"+val)}bindingOptions=bindingOptions||{};var resultStrings=[],propertyAccessorResultStrings=[],makeValueAccessors=bindingOptions.valueAccessors,bindingParams=bindingOptions.bindingParams,keyValueArray="string"==typeof bindingsStringOrKeyValueArray?parseObjectLiteral(bindingsStringOrKeyValueArray):bindingsStringOrKeyValueArray;return ko.utils.arrayForEach(keyValueArray,function(keyValue){processKeyValue(keyValue.key||keyValue.unknown,keyValue.value)}),propertyAccessorResultStrings.length&&processKeyValue("_ko_property_writers","{"+propertyAccessorResultStrings.join(",")+" }"),resultStrings.join(",")}var javaScriptReservedWords=["true","false","null","undefined"],javaScriptAssignmentTarget=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,stringDouble='"(?:[^"\\\\]|\\\\.)*"',stringSingle="'(?:[^'\\\\]|\\\\.)*'",stringRegexp="/(?:[^/\\\\]|\\\\.)*/w*",specials=",\"'{}()/:[\\]",everyThingElse="[^\\s:,/][^"+specials+"]*[^\\s"+specials+"]",oneNotSpace="[^\\s]",bindingToken=RegExp(stringDouble+"|"+stringSingle+"|"+stringRegexp+"|"+everyThingElse+"|"+oneNotSpace,"g"),divisionLookBehind=/[\])"'A-Za-z0-9_$]+$/,keywordRegexLookBehind={in:1,return:1,typeof:1},twoWayBindings={};return{bindingRewriteValidators:[],twoWayBindings:twoWayBindings,parseObjectLiteral:parseObjectLiteral,preProcessBindings:preProcessBindings,keyValueArrayContainsKey:function(keyValueArray,key){for(var i=0;i<keyValueArray.length;i++)if(keyValueArray[i].key==key)return!0;return!1},writeValueToProperty:function(property,allBindings,key,value,checkIfDifferent){if(property&&ko.isObservable(property))!ko.isWriteableObservable(property)||checkIfDifferent&&property.peek()===value||property(value);else{var propWriters=allBindings.get("_ko_property_writers");propWriters&&propWriters[key]&&propWriters[key](value)}}}}(),ko.exportSymbol("expressionRewriting",ko.expressionRewriting),ko.exportSymbol("expressionRewriting.bindingRewriteValidators",ko.expressionRewriting.bindingRewriteValidators),ko.exportSymbol("expressionRewriting.parseObjectLiteral",ko.expressionRewriting.parseObjectLiteral),ko.exportSymbol("expressionRewriting.preProcessBindings",ko.expressionRewriting.preProcessBindings),ko.exportSymbol("expressionRewriting._twoWayBindings",ko.expressionRewriting.twoWayBindings),ko.exportSymbol("jsonExpressionRewriting",ko.expressionRewriting),ko.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",ko.expressionRewriting.preProcessBindings),function(){function isStartComment(node){return 8==node.nodeType&&startCommentRegex.test(commentNodesHaveTextProperty?node.text:node.nodeValue)}function isEndComment(node){return 8==node.nodeType&&endCommentRegex.test(commentNodesHaveTextProperty?node.text:node.nodeValue)}function getVirtualChildren(startComment,allowUnbalanced){for(var currentNode=startComment,depth=1,children=[];currentNode=currentNode.nextSibling;){if(isEndComment(currentNode)&&(depth--,0===depth))return children;children.push(currentNode),isStartComment(currentNode)&&depth++}if(!allowUnbalanced)throw new Error("Cannot find closing comment tag to match: "+startComment.nodeValue);return null}function getMatchingEndComment(startComment,allowUnbalanced){var allVirtualChildren=getVirtualChildren(startComment,allowUnbalanced);return allVirtualChildren?allVirtualChildren.length>0?allVirtualChildren[allVirtualChildren.length-1].nextSibling:startComment.nextSibling:null}function getUnbalancedChildTags(node){var childNode=node.firstChild,captureRemaining=null;if(childNode)do if(captureRemaining)captureRemaining.push(childNode);else if(isStartComment(childNode)){var matchingEndComment=getMatchingEndComment(childNode,!0);matchingEndComment?childNode=matchingEndComment:captureRemaining=[childNode]}else isEndComment(childNode)&&(captureRemaining=[childNode]);while(childNode=childNode.nextSibling);return captureRemaining}var commentNodesHaveTextProperty=document&&"<!--test-->"===document.createComment("test").text,startCommentRegex=commentNodesHaveTextProperty?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,endCommentRegex=commentNodesHaveTextProperty?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,htmlTagsWithOptionallyClosingChildren={ul:!0,ol:!0};ko.virtualElements={allowedBindings:{},childNodes:function(node){return isStartComment(node)?getVirtualChildren(node):node.childNodes},emptyNode:function(node){if(isStartComment(node))for(var virtualChildren=ko.virtualElements.childNodes(node),i=0,j=virtualChildren.length;i<j;i++)ko.removeNode(virtualChildren[i]);else ko.utils.emptyDomNode(node)},setDomNodeChildren:function(node,childNodes){if(isStartComment(node)){ko.virtualElements.emptyNode(node);for(var endCommentNode=node.nextSibling,i=0,j=childNodes.length;i<j;i++)endCommentNode.parentNode.insertBefore(childNodes[i],endCommentNode)}else ko.utils.setDomNodeChildren(node,childNodes)},prepend:function(containerNode,nodeToPrepend){isStartComment(containerNode)?containerNode.parentNode.insertBefore(nodeToPrepend,containerNode.nextSibling):containerNode.firstChild?containerNode.insertBefore(nodeToPrepend,containerNode.firstChild):containerNode.appendChild(nodeToPrepend)},insertAfter:function(containerNode,nodeToInsert,insertAfterNode){insertAfterNode?isStartComment(containerNode)?containerNode.parentNode.insertBefore(nodeToInsert,insertAfterNode.nextSibling):insertAfterNode.nextSibling?containerNode.insertBefore(nodeToInsert,insertAfterNode.nextSibling):containerNode.appendChild(nodeToInsert):ko.virtualElements.prepend(containerNode,nodeToInsert)},firstChild:function(node){return isStartComment(node)?!node.nextSibling||isEndComment(node.nextSibling)?null:node.nextSibling:node.firstChild},nextSibling:function(node){return isStartComment(node)&&(node=getMatchingEndComment(node)),node.nextSibling&&isEndComment(node.nextSibling)?null:node.nextSibling},hasBindingValue:isStartComment,virtualNodeBindingValue:function(node){var regexMatch=(commentNodesHaveTextProperty?node.text:node.nodeValue).match(startCommentRegex);return regexMatch?regexMatch[1]:null},normaliseVirtualElementDomStructure:function(elementVerified){if(htmlTagsWithOptionallyClosingChildren[ko.utils.tagNameLower(elementVerified)]){var childNode=elementVerified.firstChild;if(childNode)do if(1===childNode.nodeType){var unbalancedTags=getUnbalancedChildTags(childNode);if(unbalancedTags)for(var nodeToInsertBefore=childNode.nextSibling,i=0;i<unbalancedTags.length;i++)nodeToInsertBefore?elementVerified.insertBefore(unbalancedTags[i],nodeToInsertBefore):elementVerified.appendChild(unbalancedTags[i])}while(childNode=childNode.nextSibling)}}}}(),ko.exportSymbol("virtualElements",ko.virtualElements),ko.exportSymbol("virtualElements.allowedBindings",ko.virtualElements.allowedBindings),ko.exportSymbol("virtualElements.emptyNode",ko.virtualElements.emptyNode),ko.exportSymbol("virtualElements.insertAfter",ko.virtualElements.insertAfter),ko.exportSymbol("virtualElements.prepend",ko.virtualElements.prepend),ko.exportSymbol("virtualElements.setDomNodeChildren",ko.virtualElements.setDomNodeChildren),function(){function createBindingsStringEvaluatorViaCache(bindingsString,cache,options){var cacheKey=bindingsString+(options&&options.valueAccessors||"");return cache[cacheKey]||(cache[cacheKey]=createBindingsStringEvaluator(bindingsString,options))}function createBindingsStringEvaluator(bindingsString,options){var rewrittenBindings=ko.expressionRewriting.preProcessBindings(bindingsString,options),functionBody="with($context){with($data||{}){return{"+rewrittenBindings+"}}}";return new Function("$context","$element",functionBody)}var defaultBindingAttributeName="data-bind";ko.bindingProvider=function(){this.bindingCache={}},ko.utils.extend(ko.bindingProvider.prototype,{nodeHasBindings:function(node){switch(node.nodeType){case 1:return null!=node.getAttribute(defaultBindingAttributeName)||ko.components.getComponentNameForNode(node);case 8:return ko.virtualElements.hasBindingValue(node);default:return!1}},getBindings:function(node,bindingContext){var bindingsString=this.getBindingsString(node,bindingContext),parsedBindings=bindingsString?this.parseBindingsString(bindingsString,bindingContext,node):null;return ko.components.addBindingsForCustomElement(parsedBindings,node,bindingContext,!1)},getBindingAccessors:function(node,bindingContext){var bindingsString=this.getBindingsString(node,bindingContext),parsedBindings=bindingsString?this.parseBindingsString(bindingsString,bindingContext,node,{valueAccessors:!0}):null;return ko.components.addBindingsForCustomElement(parsedBindings,node,bindingContext,!0)},getBindingsString:function(node,bindingContext){switch(node.nodeType){case 1:return node.getAttribute(defaultBindingAttributeName);case 8:return ko.virtualElements.virtualNodeBindingValue(node);default:return null}},parseBindingsString:function(bindingsString,bindingContext,node,options){try{var bindingFunction=createBindingsStringEvaluatorViaCache(bindingsString,this.bindingCache,options);return bindingFunction(bindingContext,node)}catch(ex){throw ex.message="Unable to parse bindings.\nBindings value: "+bindingsString+"\nMessage: "+ex.message,ex}}}),ko.bindingProvider.instance=new ko.bindingProvider}(),ko.exportSymbol("bindingProvider",ko.bindingProvider),function(){function makeValueAccessor(value){return function(){return value}}function evaluateValueAccessor(valueAccessor){return valueAccessor()}function makeAccessorsFromFunction(callback){return ko.utils.objectMap(ko.dependencyDetection.ignore(callback),function(value,key){return function(){return callback()[key]}})}function makeBindingAccessors(bindings,context,node){return"function"==typeof bindings?makeAccessorsFromFunction(bindings.bind(null,context,node)):ko.utils.objectMap(bindings,makeValueAccessor)}function getBindingsAndMakeAccessors(node,context){return makeAccessorsFromFunction(this.getBindings.bind(this,node,context))}function validateThatBindingIsAllowedForVirtualElements(bindingName){var validator=ko.virtualElements.allowedBindings[bindingName];if(!validator)throw new Error("The binding '"+bindingName+"' cannot be used with virtual elements")}function applyBindingsToDescendantsInternal(bindingContext,elementOrVirtualElement,bindingContextsMayDifferFromDomParentElement){var currentChild,nextInQueue=ko.virtualElements.firstChild(elementOrVirtualElement),provider=ko.bindingProvider.instance,preprocessNode=provider.preprocessNode;if(preprocessNode){for(;currentChild=nextInQueue;)nextInQueue=ko.virtualElements.nextSibling(currentChild),preprocessNode.call(provider,currentChild);nextInQueue=ko.virtualElements.firstChild(elementOrVirtualElement)}for(;currentChild=nextInQueue;)nextInQueue=ko.virtualElements.nextSibling(currentChild),applyBindingsToNodeAndDescendantsInternal(bindingContext,currentChild,bindingContextsMayDifferFromDomParentElement)}function applyBindingsToNodeAndDescendantsInternal(bindingContext,nodeVerified,bindingContextMayDifferFromDomParentElement){var shouldBindDescendants=!0,isElement=1===nodeVerified.nodeType;isElement&&ko.virtualElements.normaliseVirtualElementDomStructure(nodeVerified);var shouldApplyBindings=isElement&&bindingContextMayDifferFromDomParentElement||ko.bindingProvider.instance.nodeHasBindings(nodeVerified);shouldApplyBindings&&(shouldBindDescendants=applyBindingsToNodeInternal(nodeVerified,null,bindingContext,bindingContextMayDifferFromDomParentElement).shouldBindDescendants),shouldBindDescendants&&!bindingDoesNotRecurseIntoElementTypes[ko.utils.tagNameLower(nodeVerified)]&&applyBindingsToDescendantsInternal(bindingContext,nodeVerified,!isElement)}function topologicalSortBindings(bindings){var result=[],bindingsConsidered={},cyclicDependencyStack=[];return ko.utils.objectForEach(bindings,function pushBinding(bindingKey){if(!bindingsConsidered[bindingKey]){var binding=ko.getBindingHandler(bindingKey);binding&&(binding.after&&(cyclicDependencyStack.push(bindingKey),ko.utils.arrayForEach(binding.after,function(bindingDependencyKey){if(bindings[bindingDependencyKey]){if(ko.utils.arrayIndexOf(cyclicDependencyStack,bindingDependencyKey)!==-1)throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+cyclicDependencyStack.join(", "));pushBinding(bindingDependencyKey)}}),cyclicDependencyStack.length--),result.push({key:bindingKey,handler:binding})),bindingsConsidered[bindingKey]=!0}}),result}function applyBindingsToNodeInternal(node,sourceBindings,bindingContext,bindingContextMayDifferFromDomParentElement){function allBindings(){return ko.utils.objectMap(bindingsUpdater?bindingsUpdater():bindings,evaluateValueAccessor)}var alreadyBound=ko.utils.domData.get(node,boundElementDomDataKey);if(!sourceBindings){if(alreadyBound)throw Error("You cannot apply bindings multiple times to the same element.");ko.utils.domData.set(node,boundElementDomDataKey,!0)}!alreadyBound&&bindingContextMayDifferFromDomParentElement&&ko.storedBindingContextForNode(node,bindingContext);var bindings;if(sourceBindings&&"function"!=typeof sourceBindings)bindings=sourceBindings;else{var provider=ko.bindingProvider.instance,getBindings=provider.getBindingAccessors||getBindingsAndMakeAccessors,bindingsUpdater=ko.dependentObservable(function(){return bindings=sourceBindings?sourceBindings(bindingContext,node):getBindings.call(provider,node,bindingContext),bindings&&bindingContext._subscribable&&bindingContext._subscribable(),bindings},null,{disposeWhenNodeIsRemoved:node});bindings&&bindingsUpdater.isActive()||(bindingsUpdater=null)}var bindingHandlerThatControlsDescendantBindings;if(bindings){var getValueAccessor=bindingsUpdater?function(bindingKey){return function(){return evaluateValueAccessor(bindingsUpdater()[bindingKey])}}:function(bindingKey){return bindings[bindingKey]};allBindings.get=function(key){return bindings[key]&&evaluateValueAccessor(getValueAccessor(key))},allBindings.has=function(key){return key in bindings};var orderedBindings=topologicalSortBindings(bindings);ko.utils.arrayForEach(orderedBindings,function(bindingKeyAndHandler){var handlerInitFn=bindingKeyAndHandler.handler.init,handlerUpdateFn=bindingKeyAndHandler.handler.update,bindingKey=bindingKeyAndHandler.key;8===node.nodeType&&validateThatBindingIsAllowedForVirtualElements(bindingKey);try{"function"==typeof handlerInitFn&&ko.dependencyDetection.ignore(function(){var initResult=handlerInitFn(node,getValueAccessor(bindingKey),allBindings,bindingContext.$data,bindingContext);if(initResult&&initResult.controlsDescendantBindings){if(bindingHandlerThatControlsDescendantBindings!==undefined)throw new Error("Multiple bindings ("+bindingHandlerThatControlsDescendantBindings+" and "+bindingKey+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");bindingHandlerThatControlsDescendantBindings=bindingKey}}),"function"==typeof handlerUpdateFn&&ko.dependentObservable(function(){handlerUpdateFn(node,getValueAccessor(bindingKey),allBindings,bindingContext.$data,bindingContext)},null,{disposeWhenNodeIsRemoved:node})}catch(ex){throw ex.message='Unable to process binding "'+bindingKey+": "+bindings[bindingKey]+'"\nMessage: '+ex.message,ex}})}return{shouldBindDescendants:bindingHandlerThatControlsDescendantBindings===undefined}}function getBindingContext(viewModelOrBindingContext){return viewModelOrBindingContext&&viewModelOrBindingContext instanceof ko.bindingContext?viewModelOrBindingContext:new ko.bindingContext(viewModelOrBindingContext)}ko.bindingHandlers={};var bindingDoesNotRecurseIntoElementTypes={script:!0,textarea:!0,template:!0};ko.getBindingHandler=function(bindingKey){return ko.bindingHandlers[bindingKey]},ko.bindingContext=function(dataItemOrAccessor,parentContext,dataItemAlias,extendCallback){function updateContext(){var dataItemOrObservable=isFunc?dataItemOrAccessor():dataItemOrAccessor,dataItem=ko.utils.unwrapObservable(dataItemOrObservable);return parentContext?(parentContext._subscribable&&parentContext._subscribable(),ko.utils.extend(self,parentContext),subscribable&&(self._subscribable=subscribable)):(self.$parents=[],self.$root=dataItem,self.ko=ko),self.$rawData=dataItemOrObservable,self.$data=dataItem,dataItemAlias&&(self[dataItemAlias]=dataItem),extendCallback&&extendCallback(self,parentContext,dataItem),self.$data}function disposeWhen(){return nodes&&!ko.utils.anyDomNodeIsAttachedToDocument(nodes)}var nodes,self=this,isFunc="function"==typeof dataItemOrAccessor&&!ko.isObservable(dataItemOrAccessor),subscribable=ko.dependentObservable(updateContext,null,{disposeWhen:disposeWhen,disposeWhenNodeIsRemoved:!0});subscribable.isActive()&&(self._subscribable=subscribable,subscribable.equalityComparer=null,nodes=[],subscribable._addNode=function(node){nodes.push(node),ko.utils.domNodeDisposal.addDisposeCallback(node,function(node){ko.utils.arrayRemoveItem(nodes,node),nodes.length||(subscribable.dispose(),self._subscribable=subscribable=undefined)})})},ko.bindingContext.prototype.createChildContext=function(dataItemOrAccessor,dataItemAlias,extendCallback){return new ko.bindingContext(dataItemOrAccessor,this,dataItemAlias,function(self,parentContext){self.$parentContext=parentContext,self.$parent=parentContext.$data,self.$parents=(parentContext.$parents||[]).slice(0),self.$parents.unshift(self.$parent),extendCallback&&extendCallback(self)})},ko.bindingContext.prototype.extend=function(properties){return new ko.bindingContext(this._subscribable||this.$data,this,null,function(self,parentContext){self.$rawData=parentContext.$rawData,ko.utils.extend(self,"function"==typeof properties?properties():properties)})};var boundElementDomDataKey=ko.utils.domData.nextKey(),storedBindingContextDomDataKey=ko.utils.domData.nextKey();ko.storedBindingContextForNode=function(node,bindingContext){return 2!=arguments.length?ko.utils.domData.get(node,storedBindingContextDomDataKey):(ko.utils.domData.set(node,storedBindingContextDomDataKey,bindingContext),void(bindingContext._subscribable&&bindingContext._subscribable._addNode(node)))},ko.applyBindingAccessorsToNode=function(node,bindings,viewModelOrBindingContext){return 1===node.nodeType&&ko.virtualElements.normaliseVirtualElementDomStructure(node),applyBindingsToNodeInternal(node,bindings,getBindingContext(viewModelOrBindingContext),!0)},ko.applyBindingsToNode=function(node,bindings,viewModelOrBindingContext){var context=getBindingContext(viewModelOrBindingContext);return ko.applyBindingAccessorsToNode(node,makeBindingAccessors(bindings,context,node),context)},ko.applyBindingsToDescendants=function(viewModelOrBindingContext,rootNode){1!==rootNode.nodeType&&8!==rootNode.nodeType||applyBindingsToDescendantsInternal(getBindingContext(viewModelOrBindingContext),rootNode,!0)},ko.applyBindings=function(viewModelOrBindingContext,rootNode){if(!jQueryInstance&&window.jQuery&&(jQueryInstance=window.jQuery),rootNode&&1!==rootNode.nodeType&&8!==rootNode.nodeType)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");rootNode=rootNode||window.document.body,applyBindingsToNodeAndDescendantsInternal(getBindingContext(viewModelOrBindingContext),rootNode,!0)},ko.contextFor=function(node){switch(node.nodeType){case 1:case 8:var context=ko.storedBindingContextForNode(node);if(context)return context;if(node.parentNode)return ko.contextFor(node.parentNode)}return undefined},ko.dataFor=function(node){var context=ko.contextFor(node);return context?context.$data:undefined},ko.exportSymbol("bindingHandlers",ko.bindingHandlers),ko.exportSymbol("applyBindings",ko.applyBindings),ko.exportSymbol("applyBindingsToDescendants",ko.applyBindingsToDescendants),ko.exportSymbol("applyBindingAccessorsToNode",ko.applyBindingAccessorsToNode),ko.exportSymbol("applyBindingsToNode",ko.applyBindingsToNode),ko.exportSymbol("contextFor",ko.contextFor),ko.exportSymbol("dataFor",ko.dataFor)}(),function(undefined){function getObjectOwnProperty(obj,propName){return obj.hasOwnProperty(propName)?obj[propName]:undefined}function loadComponentAndNotify(componentName,callback){var completedAsync,subscribable=getObjectOwnProperty(loadingSubscribablesCache,componentName);
subscribable?subscribable.subscribe(callback):(subscribable=loadingSubscribablesCache[componentName]=new ko.subscribable,subscribable.subscribe(callback),beginLoadingComponent(componentName,function(definition,config){var isSynchronousComponent=!(!config||!config.synchronous);loadedDefinitionsCache[componentName]={definition:definition,isSynchronousComponent:isSynchronousComponent},delete loadingSubscribablesCache[componentName],completedAsync||isSynchronousComponent?subscribable.notifySubscribers(definition):ko.tasks.schedule(function(){subscribable.notifySubscribers(definition)})}),completedAsync=!0)}function beginLoadingComponent(componentName,callback){getFirstResultFromLoaders("getConfig",[componentName],function(config){config?getFirstResultFromLoaders("loadComponent",[componentName,config],function(definition){callback(definition,config)}):callback(null,null)})}function getFirstResultFromLoaders(methodName,argsExceptCallback,callback,candidateLoaders){candidateLoaders||(candidateLoaders=ko.components.loaders.slice(0));var currentCandidateLoader=candidateLoaders.shift();if(currentCandidateLoader){var methodInstance=currentCandidateLoader[methodName];if(methodInstance){var wasAborted=!1,synchronousReturnValue=methodInstance.apply(currentCandidateLoader,argsExceptCallback.concat(function(result){wasAborted?callback(null):null!==result?callback(result):getFirstResultFromLoaders(methodName,argsExceptCallback,callback,candidateLoaders)}));if(synchronousReturnValue!==undefined&&(wasAborted=!0,!currentCandidateLoader.suppressLoaderExceptions))throw new Error("Component loaders must supply values by invoking the callback, not by returning values synchronously.")}else getFirstResultFromLoaders(methodName,argsExceptCallback,callback,candidateLoaders)}else callback(null)}var loadingSubscribablesCache={},loadedDefinitionsCache={};ko.components={get:function(componentName,callback){var cachedDefinition=getObjectOwnProperty(loadedDefinitionsCache,componentName);cachedDefinition?cachedDefinition.isSynchronousComponent?ko.dependencyDetection.ignore(function(){callback(cachedDefinition.definition)}):ko.tasks.schedule(function(){callback(cachedDefinition.definition)}):loadComponentAndNotify(componentName,callback)},clearCachedDefinition:function(componentName){delete loadedDefinitionsCache[componentName]},_getFirstResultFromLoaders:getFirstResultFromLoaders},ko.components.loaders=[],ko.exportSymbol("components",ko.components),ko.exportSymbol("components.get",ko.components.get),ko.exportSymbol("components.clearCachedDefinition",ko.components.clearCachedDefinition)}(),function(undefined){function resolveConfig(componentName,errorCallback,config,callback){var result={},makeCallBackWhenZero=2,tryIssueCallback=function(){0===--makeCallBackWhenZero&&callback(result)},templateConfig=config.template,viewModelConfig=config.viewModel;templateConfig?possiblyGetConfigFromAmd(errorCallback,templateConfig,function(loadedConfig){ko.components._getFirstResultFromLoaders("loadTemplate",[componentName,loadedConfig],function(resolvedTemplate){result.template=resolvedTemplate,tryIssueCallback()})}):tryIssueCallback(),viewModelConfig?possiblyGetConfigFromAmd(errorCallback,viewModelConfig,function(loadedConfig){ko.components._getFirstResultFromLoaders("loadViewModel",[componentName,loadedConfig],function(resolvedViewModel){result[createViewModelKey]=resolvedViewModel,tryIssueCallback()})}):tryIssueCallback()}function resolveTemplate(errorCallback,templateConfig,callback){if("string"==typeof templateConfig)callback(ko.utils.parseHtmlFragment(templateConfig));else if(templateConfig instanceof Array)callback(templateConfig);else if(isDocumentFragment(templateConfig))callback(ko.utils.makeArray(templateConfig.childNodes));else if(templateConfig.element){var element=templateConfig.element;if(isDomElement(element))callback(cloneNodesFromTemplateSourceElement(element));else if("string"==typeof element){var elemInstance=document.getElementById(element);elemInstance?callback(cloneNodesFromTemplateSourceElement(elemInstance)):errorCallback("Cannot find element with ID "+element)}else errorCallback("Unknown element type: "+element)}else errorCallback("Unknown template value: "+templateConfig)}function resolveViewModel(errorCallback,viewModelConfig,callback){if("function"==typeof viewModelConfig)callback(function(params){return new viewModelConfig(params)});else if("function"==typeof viewModelConfig[createViewModelKey])callback(viewModelConfig[createViewModelKey]);else if("instance"in viewModelConfig){var fixedInstance=viewModelConfig.instance;callback(function(params,componentInfo){return fixedInstance})}else"viewModel"in viewModelConfig?resolveViewModel(errorCallback,viewModelConfig.viewModel,callback):errorCallback("Unknown viewModel value: "+viewModelConfig)}function cloneNodesFromTemplateSourceElement(elemInstance){switch(ko.utils.tagNameLower(elemInstance)){case"script":return ko.utils.parseHtmlFragment(elemInstance.text);case"textarea":return ko.utils.parseHtmlFragment(elemInstance.value);case"template":if(isDocumentFragment(elemInstance.content))return ko.utils.cloneNodes(elemInstance.content.childNodes)}return ko.utils.cloneNodes(elemInstance.childNodes)}function isDomElement(obj){return window.HTMLElement?obj instanceof HTMLElement:obj&&obj.tagName&&1===obj.nodeType}function isDocumentFragment(obj){return window.DocumentFragment?obj instanceof DocumentFragment:obj&&11===obj.nodeType}function possiblyGetConfigFromAmd(errorCallback,config,callback){"string"==typeof config.require?amdRequire||window.require?(amdRequire||window.require)([config.require],callback):errorCallback("Uses require, but no AMD loader is present"):callback(config)}function makeErrorCallback(componentName){return function(message){throw new Error("Component '"+componentName+"': "+message)}}var defaultConfigRegistry={};ko.components.register=function(componentName,config){if(!config)throw new Error("Invalid configuration for "+componentName);if(ko.components.isRegistered(componentName))throw new Error("Component "+componentName+" is already registered");defaultConfigRegistry[componentName]=config},ko.components.isRegistered=function(componentName){return defaultConfigRegistry.hasOwnProperty(componentName)},ko.components.unregister=function(componentName){delete defaultConfigRegistry[componentName],ko.components.clearCachedDefinition(componentName)},ko.components.defaultLoader={getConfig:function(componentName,callback){var result=defaultConfigRegistry.hasOwnProperty(componentName)?defaultConfigRegistry[componentName]:null;callback(result)},loadComponent:function(componentName,config,callback){var errorCallback=makeErrorCallback(componentName);possiblyGetConfigFromAmd(errorCallback,config,function(loadedConfig){resolveConfig(componentName,errorCallback,loadedConfig,callback)})},loadTemplate:function(componentName,templateConfig,callback){resolveTemplate(makeErrorCallback(componentName),templateConfig,callback)},loadViewModel:function(componentName,viewModelConfig,callback){resolveViewModel(makeErrorCallback(componentName),viewModelConfig,callback)}};var createViewModelKey="createViewModel";ko.exportSymbol("components.register",ko.components.register),ko.exportSymbol("components.isRegistered",ko.components.isRegistered),ko.exportSymbol("components.unregister",ko.components.unregister),ko.exportSymbol("components.defaultLoader",ko.components.defaultLoader),ko.components.loaders.push(ko.components.defaultLoader),ko.components._allRegisteredComponents=defaultConfigRegistry}(),function(undefined){function getComponentParamsFromCustomElement(elem,bindingContext){var paramsAttribute=elem.getAttribute("params");if(paramsAttribute){var params=nativeBindingProviderInstance.parseBindingsString(paramsAttribute,bindingContext,elem,{valueAccessors:!0,bindingParams:!0}),rawParamComputedValues=ko.utils.objectMap(params,function(paramValue,paramName){return ko.computed(paramValue,null,{disposeWhenNodeIsRemoved:elem})}),result=ko.utils.objectMap(rawParamComputedValues,function(paramValueComputed,paramName){var paramValue=paramValueComputed.peek();return paramValueComputed.isActive()?ko.computed({read:function(){return ko.utils.unwrapObservable(paramValueComputed())},write:ko.isWriteableObservable(paramValue)&&function(value){paramValueComputed()(value)},disposeWhenNodeIsRemoved:elem}):paramValue});return result.hasOwnProperty("$raw")||(result.$raw=rawParamComputedValues),result}return{$raw:{}}}ko.components.getComponentNameForNode=function(node){var tagNameLower=ko.utils.tagNameLower(node);if(ko.components.isRegistered(tagNameLower)&&(tagNameLower.indexOf("-")!=-1||""+node=="[object HTMLUnknownElement]"||ko.utils.ieVersion<=8&&node.tagName===tagNameLower))return tagNameLower},ko.components.addBindingsForCustomElement=function(allBindings,node,bindingContext,valueAccessors){if(1===node.nodeType){var componentName=ko.components.getComponentNameForNode(node);if(componentName){if(allBindings=allBindings||{},allBindings.component)throw new Error('Cannot use the "component" binding on a custom element matching a component');var componentBindingValue={name:componentName,params:getComponentParamsFromCustomElement(node,bindingContext)};allBindings.component=valueAccessors?function(){return componentBindingValue}:componentBindingValue}}return allBindings};var nativeBindingProviderInstance=new ko.bindingProvider;ko.utils.ieVersion<9&&(ko.components.register=function(originalFunction){return function(componentName){return document.createElement(componentName),originalFunction.apply(this,arguments)}}(ko.components.register),document.createDocumentFragment=function(originalFunction){return function(){var newDocFrag=originalFunction(),allComponents=ko.components._allRegisteredComponents;for(var componentName in allComponents)allComponents.hasOwnProperty(componentName)&&newDocFrag.createElement(componentName);return newDocFrag}}(document.createDocumentFragment))}(),function(undefined){function cloneTemplateIntoElement(componentName,componentDefinition,element){var template=componentDefinition.template;if(!template)throw new Error("Component '"+componentName+"' has no template");var clonedNodesArray=ko.utils.cloneNodes(template);ko.virtualElements.setDomNodeChildren(element,clonedNodesArray)}function createViewModel(componentDefinition,element,originalChildNodes,componentParams){var componentViewModelFactory=componentDefinition.createViewModel;return componentViewModelFactory?componentViewModelFactory.call(componentDefinition,componentParams,{element:element,templateNodes:originalChildNodes}):componentParams}var componentLoadingOperationUniqueId=0;ko.bindingHandlers.component={init:function(element,valueAccessor,ignored1,ignored2,bindingContext){var currentViewModel,currentLoadingOperationId,disposeAssociatedComponentViewModel=function(){var currentViewModelDispose=currentViewModel&&currentViewModel.dispose;"function"==typeof currentViewModelDispose&&currentViewModelDispose.call(currentViewModel),currentViewModel=null,currentLoadingOperationId=null},originalChildNodes=ko.utils.makeArray(ko.virtualElements.childNodes(element));return ko.utils.domNodeDisposal.addDisposeCallback(element,disposeAssociatedComponentViewModel),ko.computed(function(){var componentName,componentParams,value=ko.utils.unwrapObservable(valueAccessor());if("string"==typeof value?componentName=value:(componentName=ko.utils.unwrapObservable(value.name),componentParams=ko.utils.unwrapObservable(value.params)),!componentName)throw new Error("No component name specified");var loadingOperationId=currentLoadingOperationId=++componentLoadingOperationUniqueId;ko.components.get(componentName,function(componentDefinition){if(currentLoadingOperationId===loadingOperationId){if(disposeAssociatedComponentViewModel(),!componentDefinition)throw new Error("Unknown component '"+componentName+"'");cloneTemplateIntoElement(componentName,componentDefinition,element);var componentViewModel=createViewModel(componentDefinition,element,originalChildNodes,componentParams),childBindingContext=bindingContext.createChildContext(componentViewModel,undefined,function(ctx){ctx.$component=componentViewModel,ctx.$componentTemplateNodes=originalChildNodes});currentViewModel=componentViewModel,ko.applyBindingsToDescendants(childBindingContext,element)}})},null,{disposeWhenNodeIsRemoved:element}),{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.component=!0}();var attrHtmlToJavascriptMap={class:"className",for:"htmlFor"};ko.bindingHandlers.attr={update:function(element,valueAccessor,allBindings){var value=ko.utils.unwrapObservable(valueAccessor())||{};ko.utils.objectForEach(value,function(attrName,attrValue){attrValue=ko.utils.unwrapObservable(attrValue);var toRemove=attrValue===!1||null===attrValue||attrValue===undefined;toRemove&&element.removeAttribute(attrName),ko.utils.ieVersion<=8&&attrName in attrHtmlToJavascriptMap?(attrName=attrHtmlToJavascriptMap[attrName],toRemove?element.removeAttribute(attrName):element[attrName]=attrValue):toRemove||element.setAttribute(attrName,attrValue.toString()),"name"===attrName&&ko.utils.setElementName(element,toRemove?"":attrValue.toString())})}},function(){ko.bindingHandlers.checked={after:["value","attr"],init:function(element,valueAccessor,allBindings){function updateModel(){var isChecked=element.checked,elemValue=useCheckedValue?checkedValue():isChecked;if(!ko.computedContext.isInitial()&&(!isRadio||isChecked)){var modelValue=ko.dependencyDetection.ignore(valueAccessor);if(valueIsArray){var writableValue=rawValueIsNonArrayObservable?modelValue.peek():modelValue;oldElemValue!==elemValue?(isChecked&&(ko.utils.addOrRemoveItem(writableValue,elemValue,!0),ko.utils.addOrRemoveItem(writableValue,oldElemValue,!1)),oldElemValue=elemValue):ko.utils.addOrRemoveItem(writableValue,elemValue,isChecked),rawValueIsNonArrayObservable&&ko.isWriteableObservable(modelValue)&&modelValue(writableValue)}else ko.expressionRewriting.writeValueToProperty(modelValue,allBindings,"checked",elemValue,!0)}}function updateView(){var modelValue=ko.utils.unwrapObservable(valueAccessor());valueIsArray?element.checked=ko.utils.arrayIndexOf(modelValue,checkedValue())>=0:isCheckbox?element.checked=modelValue:element.checked=checkedValue()===modelValue}var checkedValue=ko.pureComputed(function(){return allBindings.has("checkedValue")?ko.utils.unwrapObservable(allBindings.get("checkedValue")):allBindings.has("value")?ko.utils.unwrapObservable(allBindings.get("value")):element.value}),isCheckbox="checkbox"==element.type,isRadio="radio"==element.type;if(isCheckbox||isRadio){var rawValue=valueAccessor(),valueIsArray=isCheckbox&&ko.utils.unwrapObservable(rawValue)instanceof Array,rawValueIsNonArrayObservable=!(valueIsArray&&rawValue.push&&rawValue.splice),oldElemValue=valueIsArray?checkedValue():undefined,useCheckedValue=isRadio||valueIsArray;isRadio&&!element.name&&ko.bindingHandlers.uniqueName.init(element,function(){return!0}),ko.computed(updateModel,null,{disposeWhenNodeIsRemoved:element}),ko.utils.registerEventHandler(element,"click",updateModel),ko.computed(updateView,null,{disposeWhenNodeIsRemoved:element}),rawValue=undefined}}},ko.expressionRewriting.twoWayBindings.checked=!0,ko.bindingHandlers.checkedValue={update:function(element,valueAccessor){element.value=ko.utils.unwrapObservable(valueAccessor())}}}();var classesWrittenByBindingKey="__ko__cssValue";ko.bindingHandlers.css={update:function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());null!==value&&"object"==typeof value?ko.utils.objectForEach(value,function(className,shouldHaveClass){shouldHaveClass=ko.utils.unwrapObservable(shouldHaveClass),ko.utils.toggleDomNodeCssClass(element,className,shouldHaveClass)}):(value=ko.utils.stringTrim(String(value||"")),ko.utils.toggleDomNodeCssClass(element,element[classesWrittenByBindingKey],!1),element[classesWrittenByBindingKey]=value,ko.utils.toggleDomNodeCssClass(element,value,!0))}},ko.bindingHandlers.enable={update:function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor());value&&element.disabled?element.removeAttribute("disabled"):value||element.disabled||(element.disabled=!0)}},ko.bindingHandlers.disable={update:function(element,valueAccessor){ko.bindingHandlers.enable.update(element,function(){return!ko.utils.unwrapObservable(valueAccessor())})}},ko.bindingHandlers.event={init:function(element,valueAccessor,allBindings,viewModel,bindingContext){var eventsToHandle=valueAccessor()||{};ko.utils.objectForEach(eventsToHandle,function(eventName){"string"==typeof eventName&&ko.utils.registerEventHandler(element,eventName,function(event){var handlerReturnValue,handlerFunction=valueAccessor()[eventName];if(handlerFunction){try{var argsForHandler=ko.utils.makeArray(arguments);viewModel=bindingContext.$data,argsForHandler.unshift(viewModel),handlerReturnValue=handlerFunction.apply(viewModel,argsForHandler)}finally{handlerReturnValue!==!0&&(event.preventDefault?event.preventDefault():event.returnValue=!1)}var bubble=allBindings.get(eventName+"Bubble")!==!1;bubble||(event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation())}})})}},ko.bindingHandlers.foreach={makeTemplateValueAccessor:function(valueAccessor){return function(){var modelValue=valueAccessor(),unwrappedValue=ko.utils.peekObservable(modelValue);return unwrappedValue&&"number"!=typeof unwrappedValue.length?(ko.utils.unwrapObservable(modelValue),{foreach:unwrappedValue.data,as:unwrappedValue.as,includeDestroyed:unwrappedValue.includeDestroyed,afterAdd:unwrappedValue.afterAdd,beforeRemove:unwrappedValue.beforeRemove,afterRender:unwrappedValue.afterRender,beforeMove:unwrappedValue.beforeMove,afterMove:unwrappedValue.afterMove,templateEngine:ko.nativeTemplateEngine.instance}):{foreach:modelValue,templateEngine:ko.nativeTemplateEngine.instance}}},init:function(element,valueAccessor,allBindings,viewModel,bindingContext){return ko.bindingHandlers.template.init(element,ko.bindingHandlers.foreach.makeTemplateValueAccessor(valueAccessor))},update:function(element,valueAccessor,allBindings,viewModel,bindingContext){return ko.bindingHandlers.template.update(element,ko.bindingHandlers.foreach.makeTemplateValueAccessor(valueAccessor),allBindings,viewModel,bindingContext)}},ko.expressionRewriting.bindingRewriteValidators.foreach=!1,ko.virtualElements.allowedBindings.foreach=!0;var hasfocusUpdatingProperty="__ko_hasfocusUpdating",hasfocusLastValue="__ko_hasfocusLastValue";ko.bindingHandlers.hasfocus={init:function(element,valueAccessor,allBindings){var handleElementFocusChange=function(isFocused){element[hasfocusUpdatingProperty]=!0;var ownerDoc=element.ownerDocument;if("activeElement"in ownerDoc){var active;try{active=ownerDoc.activeElement}catch(e){active=ownerDoc.body}isFocused=active===element}var modelValue=valueAccessor();ko.expressionRewriting.writeValueToProperty(modelValue,allBindings,"hasfocus",isFocused,!0),element[hasfocusLastValue]=isFocused,element[hasfocusUpdatingProperty]=!1},handleElementFocusIn=handleElementFocusChange.bind(null,!0),handleElementFocusOut=handleElementFocusChange.bind(null,!1);ko.utils.registerEventHandler(element,"focus",handleElementFocusIn),ko.utils.registerEventHandler(element,"focusin",handleElementFocusIn),ko.utils.registerEventHandler(element,"blur",handleElementFocusOut),ko.utils.registerEventHandler(element,"focusout",handleElementFocusOut)},update:function(element,valueAccessor){var value=!!ko.utils.unwrapObservable(valueAccessor());element[hasfocusUpdatingProperty]||element[hasfocusLastValue]===value||(value?element.focus():element.blur(),!value&&element[hasfocusLastValue]&&element.ownerDocument.body.focus(),ko.dependencyDetection.ignore(ko.utils.triggerEvent,null,[element,value?"focusin":"focusout"]))}},ko.expressionRewriting.twoWayBindings.hasfocus=!0,ko.bindingHandlers.hasFocus=ko.bindingHandlers.hasfocus,ko.expressionRewriting.twoWayBindings.hasFocus=!0,ko.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(element,valueAccessor){ko.utils.setHtml(element,valueAccessor())}},makeWithIfBinding("if"),makeWithIfBinding("ifnot",!1,!0),makeWithIfBinding("with",!0,!1,function(bindingContext,dataValue){return bindingContext.createChildContext(dataValue)});var captionPlaceholder={};ko.bindingHandlers.options={init:function(element){if("select"!==ko.utils.tagNameLower(element))throw new Error("options binding applies only to SELECT elements");for(;element.length>0;)element.remove(0);return{controlsDescendantBindings:!0}},update:function(element,valueAccessor,allBindings){function selectedOptions(){return ko.utils.arrayFilter(element.options,function(node){return node.selected})}function applyToObject(object,predicate,defaultValue){var predicateType=typeof predicate;return"function"==predicateType?predicate(object):"string"==predicateType?object[predicate]:defaultValue}function optionForArrayItem(arrayEntry,index,oldOptions){oldOptions.length&&(previousSelectedValues=!valueAllowUnset&&oldOptions[0].selected?[ko.selectExtensions.readValue(oldOptions[0])]:[],itemUpdate=!0);var option=element.ownerDocument.createElement("option");if(arrayEntry===captionPlaceholder)ko.utils.setTextContent(option,allBindings.get("optionsCaption")),ko.selectExtensions.writeValue(option,undefined);else{var optionValue=applyToObject(arrayEntry,allBindings.get("optionsValue"),arrayEntry);ko.selectExtensions.writeValue(option,ko.utils.unwrapObservable(optionValue));var optionText=applyToObject(arrayEntry,allBindings.get("optionsText"),optionValue);ko.utils.setTextContent(option,optionText)}return[option]}function setSelectionCallback(arrayEntry,newOptions){if(itemUpdate&&valueAllowUnset)ko.selectExtensions.writeValue(element,ko.utils.unwrapObservable(allBindings.get("value")),!0);else if(previousSelectedValues.length){var isSelected=ko.utils.arrayIndexOf(previousSelectedValues,ko.selectExtensions.readValue(newOptions[0]))>=0;ko.utils.setOptionNodeSelectionState(newOptions[0],isSelected),itemUpdate&&!isSelected&&ko.dependencyDetection.ignore(ko.utils.triggerEvent,null,[element,"change"])}}var captionValue,filteredArray,selectWasPreviouslyEmpty=0==element.length,multiple=element.multiple,previousScrollTop=!selectWasPreviouslyEmpty&&multiple?element.scrollTop:null,unwrappedArray=ko.utils.unwrapObservable(valueAccessor()),valueAllowUnset=allBindings.get("valueAllowUnset")&&allBindings.has("value"),includeDestroyed=allBindings.get("optionsIncludeDestroyed"),arrayToDomNodeChildrenOptions={},previousSelectedValues=[];valueAllowUnset||(multiple?previousSelectedValues=ko.utils.arrayMap(selectedOptions(),ko.selectExtensions.readValue):element.selectedIndex>=0&&previousSelectedValues.push(ko.selectExtensions.readValue(element.options[element.selectedIndex]))),unwrappedArray&&("undefined"==typeof unwrappedArray.length&&(unwrappedArray=[unwrappedArray]),filteredArray=ko.utils.arrayFilter(unwrappedArray,function(item){return includeDestroyed||item===undefined||null===item||!ko.utils.unwrapObservable(item._destroy)}),allBindings.has("optionsCaption")&&(captionValue=ko.utils.unwrapObservable(allBindings.get("optionsCaption")),null!==captionValue&&captionValue!==undefined&&filteredArray.unshift(captionPlaceholder)));var itemUpdate=!1;arrayToDomNodeChildrenOptions.beforeRemove=function(option){element.removeChild(option)};var callback=setSelectionCallback;allBindings.has("optionsAfterRender")&&"function"==typeof allBindings.get("optionsAfterRender")&&(callback=function(arrayEntry,newOptions){setSelectionCallback(arrayEntry,newOptions),ko.dependencyDetection.ignore(allBindings.get("optionsAfterRender"),null,[newOptions[0],arrayEntry!==captionPlaceholder?arrayEntry:undefined])}),ko.utils.setDomNodeChildrenFromArrayMapping(element,filteredArray,optionForArrayItem,arrayToDomNodeChildrenOptions,callback),ko.dependencyDetection.ignore(function(){if(valueAllowUnset)ko.selectExtensions.writeValue(element,ko.utils.unwrapObservable(allBindings.get("value")),!0);else{var selectionChanged;selectionChanged=multiple?previousSelectedValues.length&&selectedOptions().length<previousSelectedValues.length:previousSelectedValues.length&&element.selectedIndex>=0?ko.selectExtensions.readValue(element.options[element.selectedIndex])!==previousSelectedValues[0]:previousSelectedValues.length||element.selectedIndex>=0,selectionChanged&&ko.utils.triggerEvent(element,"change")}}),ko.utils.ensureSelectElementIsRenderedCorrectly(element),previousScrollTop&&Math.abs(previousScrollTop-element.scrollTop)>20&&(element.scrollTop=previousScrollTop)}},ko.bindingHandlers.options.optionValueDomDataKey=ko.utils.domData.nextKey(),ko.bindingHandlers.selectedOptions={after:["options","foreach"],init:function(element,valueAccessor,allBindings){ko.utils.registerEventHandler(element,"change",function(){var value=valueAccessor(),valueToWrite=[];ko.utils.arrayForEach(element.getElementsByTagName("option"),function(node){node.selected&&valueToWrite.push(ko.selectExtensions.readValue(node))}),ko.expressionRewriting.writeValueToProperty(value,allBindings,"selectedOptions",valueToWrite)})},update:function(element,valueAccessor){if("select"!=ko.utils.tagNameLower(element))throw new Error("values binding applies only to SELECT elements");var newValue=ko.utils.unwrapObservable(valueAccessor()),previousScrollTop=element.scrollTop;newValue&&"number"==typeof newValue.length&&ko.utils.arrayForEach(element.getElementsByTagName("option"),function(node){var isSelected=ko.utils.arrayIndexOf(newValue,ko.selectExtensions.readValue(node))>=0;node.selected!=isSelected&&ko.utils.setOptionNodeSelectionState(node,isSelected)}),element.scrollTop=previousScrollTop}},ko.expressionRewriting.twoWayBindings.selectedOptions=!0,ko.bindingHandlers.style={update:function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor()||{});ko.utils.objectForEach(value,function(styleName,styleValue){styleValue=ko.utils.unwrapObservable(styleValue),null!==styleValue&&styleValue!==undefined&&styleValue!==!1||(styleValue=""),element.style[styleName]=styleValue})}},ko.bindingHandlers.submit={init:function(element,valueAccessor,allBindings,viewModel,bindingContext){if("function"!=typeof valueAccessor())throw new Error("The value for a submit binding must be a function");ko.utils.registerEventHandler(element,"submit",function(event){var handlerReturnValue,value=valueAccessor();try{handlerReturnValue=value.call(bindingContext.$data,element)}finally{handlerReturnValue!==!0&&(event.preventDefault?event.preventDefault():event.returnValue=!1)}})}},ko.bindingHandlers.text={init:function(){return{controlsDescendantBindings:!0}},update:function(element,valueAccessor){ko.utils.setTextContent(element,valueAccessor())}},ko.virtualElements.allowedBindings.text=!0,function(){if(window&&window.navigator)var parseVersion=function(matches){if(matches)return parseFloat(matches[1])},operaVersion=window.opera&&window.opera.version&&parseInt(window.opera.version()),userAgent=window.navigator.userAgent,safariVersion=parseVersion(userAgent.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),firefoxVersion=parseVersion(userAgent.match(/Firefox\/([^ ]*)/));if(ko.utils.ieVersion<10)var selectionChangeRegisteredName=ko.utils.domData.nextKey(),selectionChangeHandlerName=ko.utils.domData.nextKey(),selectionChangeHandler=function(event){var target=this.activeElement,handler=target&&ko.utils.domData.get(target,selectionChangeHandlerName);handler&&handler(event)},registerForSelectionChangeEvent=function(element,handler){var ownerDoc=element.ownerDocument;ko.utils.domData.get(ownerDoc,selectionChangeRegisteredName)||(ko.utils.domData.set(ownerDoc,selectionChangeRegisteredName,!0),ko.utils.registerEventHandler(ownerDoc,"selectionchange",selectionChangeHandler)),ko.utils.domData.set(element,selectionChangeHandlerName,handler)};ko.bindingHandlers.textInput={init:function(element,valueAccessor,allBindings){var timeoutHandle,elementValueBeforeEvent,previousElementValue=element.value,updateModel=function(event){clearTimeout(timeoutHandle),elementValueBeforeEvent=timeoutHandle=undefined;var elementValue=element.value;previousElementValue!==elementValue&&(DEBUG&&event&&(element._ko_textInputProcessedEvent=event.type),previousElementValue=elementValue,ko.expressionRewriting.writeValueToProperty(valueAccessor(),allBindings,"textInput",elementValue))},deferUpdateModel=function(event){if(!timeoutHandle){elementValueBeforeEvent=element.value;var handler=DEBUG?updateModel.bind(element,{type:event.type}):updateModel;timeoutHandle=ko.utils.setTimeout(handler,4)}},ieUpdateModel=9==ko.utils.ieVersion?deferUpdateModel:updateModel,updateView=function(){var modelValue=ko.utils.unwrapObservable(valueAccessor());return null!==modelValue&&modelValue!==undefined||(modelValue=""),elementValueBeforeEvent!==undefined&&modelValue===elementValueBeforeEvent?void ko.utils.setTimeout(updateView,4):void(element.value!==modelValue&&(previousElementValue=modelValue,element.value=modelValue))},onEvent=function(event,handler){ko.utils.registerEventHandler(element,event,handler)};DEBUG&&ko.bindingHandlers.textInput._forceUpdateOn?ko.utils.arrayForEach(ko.bindingHandlers.textInput._forceUpdateOn,function(eventName){"after"==eventName.slice(0,5)?onEvent(eventName.slice(5),deferUpdateModel):onEvent(eventName,updateModel)}):ko.utils.ieVersion<10?(onEvent("propertychange",function(event){"value"===event.propertyName&&ieUpdateModel(event)}),8==ko.utils.ieVersion&&(onEvent("keyup",updateModel),onEvent("keydown",updateModel)),ko.utils.ieVersion>=8&&(registerForSelectionChangeEvent(element,ieUpdateModel),onEvent("dragend",deferUpdateModel))):(onEvent("input",updateModel),safariVersion<5&&"textarea"===ko.utils.tagNameLower(element)?(onEvent("keydown",deferUpdateModel),onEvent("paste",deferUpdateModel),onEvent("cut",deferUpdateModel)):operaVersion<11?onEvent("keydown",deferUpdateModel):firefoxVersion<4&&(onEvent("DOMAutoComplete",updateModel),onEvent("dragdrop",updateModel),onEvent("drop",updateModel))),onEvent("change",updateModel),ko.computed(updateView,null,{disposeWhenNodeIsRemoved:element})}},ko.expressionRewriting.twoWayBindings.textInput=!0,ko.bindingHandlers.textinput={preprocess:function(value,name,addBinding){addBinding("textInput",value)}}}(),ko.bindingHandlers.uniqueName={init:function(element,valueAccessor){if(valueAccessor()){var name="ko_unique_"+ ++ko.bindingHandlers.uniqueName.currentIndex;ko.utils.setElementName(element,name)}}},ko.bindingHandlers.uniqueName.currentIndex=0,ko.bindingHandlers.value={after:["options","foreach"],init:function(element,valueAccessor,allBindings){if("input"==element.tagName.toLowerCase()&&("checkbox"==element.type||"radio"==element.type))return void ko.applyBindingAccessorsToNode(element,{checkedValue:valueAccessor});var eventsToCatch=["change"],requestedEventsToCatch=allBindings.get("valueUpdate"),propertyChangedFired=!1,elementValueBeforeEvent=null;requestedEventsToCatch&&("string"==typeof requestedEventsToCatch&&(requestedEventsToCatch=[requestedEventsToCatch]),ko.utils.arrayPushAll(eventsToCatch,requestedEventsToCatch),eventsToCatch=ko.utils.arrayGetDistinctValues(eventsToCatch));var valueUpdateHandler=function(){elementValueBeforeEvent=null,propertyChangedFired=!1;var modelValue=valueAccessor(),elementValue=ko.selectExtensions.readValue(element);ko.expressionRewriting.writeValueToProperty(modelValue,allBindings,"value",elementValue)},ieAutoCompleteHackNeeded=ko.utils.ieVersion&&"input"==element.tagName.toLowerCase()&&"text"==element.type&&"off"!=element.autocomplete&&(!element.form||"off"!=element.form.autocomplete);ieAutoCompleteHackNeeded&&ko.utils.arrayIndexOf(eventsToCatch,"propertychange")==-1&&(ko.utils.registerEventHandler(element,"propertychange",function(){propertyChangedFired=!0}),ko.utils.registerEventHandler(element,"focus",function(){propertyChangedFired=!1}),ko.utils.registerEventHandler(element,"blur",function(){propertyChangedFired&&valueUpdateHandler()})),ko.utils.arrayForEach(eventsToCatch,function(eventName){
var handler=valueUpdateHandler;ko.utils.stringStartsWith(eventName,"after")&&(handler=function(){elementValueBeforeEvent=ko.selectExtensions.readValue(element),ko.utils.setTimeout(valueUpdateHandler,0)},eventName=eventName.substring("after".length)),ko.utils.registerEventHandler(element,eventName,handler)});var updateFromModel=function(){var newValue=ko.utils.unwrapObservable(valueAccessor()),elementValue=ko.selectExtensions.readValue(element);if(null!==elementValueBeforeEvent&&newValue===elementValueBeforeEvent)return void ko.utils.setTimeout(updateFromModel,0);var valueHasChanged=newValue!==elementValue;if(valueHasChanged)if("select"===ko.utils.tagNameLower(element)){var allowUnset=allBindings.get("valueAllowUnset"),applyValueAction=function(){ko.selectExtensions.writeValue(element,newValue,allowUnset)};applyValueAction(),allowUnset||newValue===ko.selectExtensions.readValue(element)?ko.utils.setTimeout(applyValueAction,0):ko.dependencyDetection.ignore(ko.utils.triggerEvent,null,[element,"change"])}else ko.selectExtensions.writeValue(element,newValue)};ko.computed(updateFromModel,null,{disposeWhenNodeIsRemoved:element})},update:function(){}},ko.expressionRewriting.twoWayBindings.value=!0,ko.bindingHandlers.visible={update:function(element,valueAccessor){var value=ko.utils.unwrapObservable(valueAccessor()),isCurrentlyVisible=!("none"==element.style.display);value&&!isCurrentlyVisible?element.style.display="":!value&&isCurrentlyVisible&&(element.style.display="none")}},makeEventHandlerShortcut("click"),ko.templateEngine=function(){},ko.templateEngine.prototype.renderTemplateSource=function(templateSource,bindingContext,options,templateDocument){throw new Error("Override renderTemplateSource")},ko.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(script){throw new Error("Override createJavaScriptEvaluatorBlock")},ko.templateEngine.prototype.makeTemplateSource=function(template,templateDocument){if("string"==typeof template){templateDocument=templateDocument||document;var elem=templateDocument.getElementById(template);if(!elem)throw new Error("Cannot find template with ID "+template);return new ko.templateSources.domElement(elem)}if(1==template.nodeType||8==template.nodeType)return new ko.templateSources.anonymousTemplate(template);throw new Error("Unknown template type: "+template)},ko.templateEngine.prototype.renderTemplate=function(template,bindingContext,options,templateDocument){var templateSource=this.makeTemplateSource(template,templateDocument);return this.renderTemplateSource(templateSource,bindingContext,options,templateDocument)},ko.templateEngine.prototype.isTemplateRewritten=function(template,templateDocument){return this.allowTemplateRewriting===!1||this.makeTemplateSource(template,templateDocument).data("isRewritten")},ko.templateEngine.prototype.rewriteTemplate=function(template,rewriterCallback,templateDocument){var templateSource=this.makeTemplateSource(template,templateDocument),rewritten=rewriterCallback(templateSource.text());templateSource.text(rewritten),templateSource.data("isRewritten",!0)},ko.exportSymbol("templateEngine",ko.templateEngine),ko.templateRewriting=function(){function validateDataBindValuesForRewriting(keyValueArray){for(var allValidators=ko.expressionRewriting.bindingRewriteValidators,i=0;i<keyValueArray.length;i++){var key=keyValueArray[i].key;if(allValidators.hasOwnProperty(key)){var validator=allValidators[key];if("function"==typeof validator){var possibleErrorMessage=validator(keyValueArray[i].value);if(possibleErrorMessage)throw new Error(possibleErrorMessage)}else if(!validator)throw new Error("This template engine does not support the '"+key+"' binding within its templates")}}}function constructMemoizedTagReplacement(dataBindAttributeValue,tagToRetain,nodeName,templateEngine){var dataBindKeyValueArray=ko.expressionRewriting.parseObjectLiteral(dataBindAttributeValue);validateDataBindValuesForRewriting(dataBindKeyValueArray);var rewrittenDataBindAttributeValue=ko.expressionRewriting.preProcessBindings(dataBindKeyValueArray,{valueAccessors:!0}),applyBindingsToNextSiblingScript="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+rewrittenDataBindAttributeValue+" } })()},'"+nodeName.toLowerCase()+"')";return templateEngine.createJavaScriptEvaluatorBlock(applyBindingsToNextSiblingScript)+tagToRetain}var memoizeDataBindingAttributeSyntaxRegex=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'|[^>]*))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,memoizeVirtualContainerBindingSyntaxRegex=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(template,templateEngine,templateDocument){templateEngine.isTemplateRewritten(template,templateDocument)||templateEngine.rewriteTemplate(template,function(htmlString){return ko.templateRewriting.memoizeBindingAttributeSyntax(htmlString,templateEngine)},templateDocument)},memoizeBindingAttributeSyntax:function(htmlString,templateEngine){return htmlString.replace(memoizeDataBindingAttributeSyntaxRegex,function(){return constructMemoizedTagReplacement(arguments[4],arguments[1],arguments[2],templateEngine)}).replace(memoizeVirtualContainerBindingSyntaxRegex,function(){return constructMemoizedTagReplacement(arguments[1],"<!-- ko -->","#comment",templateEngine)})},applyMemoizedBindingsToNextSibling:function(bindings,nodeName){return ko.memoization.memoize(function(domNode,bindingContext){var nodeToBind=domNode.nextSibling;nodeToBind&&nodeToBind.nodeName.toLowerCase()===nodeName&&ko.applyBindingAccessorsToNode(nodeToBind,bindings,bindingContext)})}}}(),ko.exportSymbol("__tr_ambtns",ko.templateRewriting.applyMemoizedBindingsToNextSibling),function(){function getTemplateDomData(element){return ko.utils.domData.get(element,templatesDomDataKey)||{}}function setTemplateDomData(element,data){ko.utils.domData.set(element,templatesDomDataKey,data)}ko.templateSources={};var templateScript=1,templateTextArea=2,templateTemplate=3,templateElement=4;ko.templateSources.domElement=function(element){if(this.domElement=element,element){var tagNameLower=ko.utils.tagNameLower(element);this.templateType="script"===tagNameLower?templateScript:"textarea"===tagNameLower?templateTextArea:"template"==tagNameLower&&element.content&&11===element.content.nodeType?templateTemplate:templateElement}},ko.templateSources.domElement.prototype.text=function(){var elemContentsProperty=this.templateType===templateScript?"text":this.templateType===templateTextArea?"value":"innerHTML";if(0==arguments.length)return this.domElement[elemContentsProperty];var valueToWrite=arguments[0];"innerHTML"===elemContentsProperty?ko.utils.setHtml(this.domElement,valueToWrite):this.domElement[elemContentsProperty]=valueToWrite};var dataDomDataPrefix=ko.utils.domData.nextKey()+"_";ko.templateSources.domElement.prototype.data=function(key){return 1===arguments.length?ko.utils.domData.get(this.domElement,dataDomDataPrefix+key):void ko.utils.domData.set(this.domElement,dataDomDataPrefix+key,arguments[1])};var templatesDomDataKey=ko.utils.domData.nextKey();ko.templateSources.domElement.prototype.nodes=function(){var element=this.domElement;if(0==arguments.length){var templateData=getTemplateDomData(element),containerData=templateData.containerData;return containerData||(this.templateType===templateTemplate?element.content:this.templateType===templateElement?element:undefined)}var valueToWrite=arguments[0];setTemplateDomData(element,{containerData:valueToWrite})},ko.templateSources.anonymousTemplate=function(element){this.domElement=element},ko.templateSources.anonymousTemplate.prototype=new ko.templateSources.domElement,ko.templateSources.anonymousTemplate.prototype.constructor=ko.templateSources.anonymousTemplate,ko.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var templateData=getTemplateDomData(this.domElement);return templateData.textData===undefined&&templateData.containerData&&(templateData.textData=templateData.containerData.innerHTML),templateData.textData}var valueToWrite=arguments[0];setTemplateDomData(this.domElement,{textData:valueToWrite})},ko.exportSymbol("templateSources",ko.templateSources),ko.exportSymbol("templateSources.domElement",ko.templateSources.domElement),ko.exportSymbol("templateSources.anonymousTemplate",ko.templateSources.anonymousTemplate)}(),function(){function invokeForEachNodeInContinuousRange(firstNode,lastNode,action){for(var node,nextInQueue=firstNode,firstOutOfRangeNode=ko.virtualElements.nextSibling(lastNode);nextInQueue&&(node=nextInQueue)!==firstOutOfRangeNode;)nextInQueue=ko.virtualElements.nextSibling(node),action(node,nextInQueue)}function activateBindingsOnContinuousNodeArray(continuousNodeArray,bindingContext){if(continuousNodeArray.length){var firstNode=continuousNodeArray[0],lastNode=continuousNodeArray[continuousNodeArray.length-1],parentNode=firstNode.parentNode,provider=ko.bindingProvider.instance,preprocessNode=provider.preprocessNode;if(preprocessNode){if(invokeForEachNodeInContinuousRange(firstNode,lastNode,function(node,nextNodeInRange){var nodePreviousSibling=node.previousSibling,newNodes=preprocessNode.call(provider,node);newNodes&&(node===firstNode&&(firstNode=newNodes[0]||nextNodeInRange),node===lastNode&&(lastNode=newNodes[newNodes.length-1]||nodePreviousSibling))}),continuousNodeArray.length=0,!firstNode)return;firstNode===lastNode?continuousNodeArray.push(firstNode):(continuousNodeArray.push(firstNode,lastNode),ko.utils.fixUpContinuousNodeArray(continuousNodeArray,parentNode))}invokeForEachNodeInContinuousRange(firstNode,lastNode,function(node){1!==node.nodeType&&8!==node.nodeType||ko.applyBindings(bindingContext,node)}),invokeForEachNodeInContinuousRange(firstNode,lastNode,function(node){1!==node.nodeType&&8!==node.nodeType||ko.memoization.unmemoizeDomNodeAndDescendants(node,[bindingContext])}),ko.utils.fixUpContinuousNodeArray(continuousNodeArray,parentNode)}}function getFirstNodeFromPossibleArray(nodeOrNodeArray){return nodeOrNodeArray.nodeType?nodeOrNodeArray:nodeOrNodeArray.length>0?nodeOrNodeArray[0]:null}function executeTemplate(targetNodeOrNodeArray,renderMode,template,bindingContext,options){options=options||{};var firstTargetNode=targetNodeOrNodeArray&&getFirstNodeFromPossibleArray(targetNodeOrNodeArray),templateDocument=(firstTargetNode||template||{}).ownerDocument,templateEngineToUse=options.templateEngine||_templateEngine;ko.templateRewriting.ensureTemplateIsRewritten(template,templateEngineToUse,templateDocument);var renderedNodesArray=templateEngineToUse.renderTemplate(template,bindingContext,options,templateDocument);if("number"!=typeof renderedNodesArray.length||renderedNodesArray.length>0&&"number"!=typeof renderedNodesArray[0].nodeType)throw new Error("Template engine must return an array of DOM nodes");var haveAddedNodesToParent=!1;switch(renderMode){case"replaceChildren":ko.virtualElements.setDomNodeChildren(targetNodeOrNodeArray,renderedNodesArray),haveAddedNodesToParent=!0;break;case"replaceNode":ko.utils.replaceDomNodes(targetNodeOrNodeArray,renderedNodesArray),haveAddedNodesToParent=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+renderMode)}return haveAddedNodesToParent&&(activateBindingsOnContinuousNodeArray(renderedNodesArray,bindingContext),options.afterRender&&ko.dependencyDetection.ignore(options.afterRender,null,[renderedNodesArray,bindingContext.$data])),renderedNodesArray}function resolveTemplateName(template,data,context){return ko.isObservable(template)?template():"function"==typeof template?template(data,context):template}function disposeOldComputedAndStoreNewOne(element,newComputed){var oldComputed=ko.utils.domData.get(element,templateComputedDomDataKey);oldComputed&&"function"==typeof oldComputed.dispose&&oldComputed.dispose(),ko.utils.domData.set(element,templateComputedDomDataKey,newComputed&&newComputed.isActive()?newComputed:undefined)}var _templateEngine;ko.setTemplateEngine=function(templateEngine){if(templateEngine!=undefined&&!(templateEngine instanceof ko.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");_templateEngine=templateEngine},ko.renderTemplate=function(template,dataOrBindingContext,options,targetNodeOrNodeArray,renderMode){if(options=options||{},(options.templateEngine||_templateEngine)==undefined)throw new Error("Set a template engine before calling renderTemplate");if(renderMode=renderMode||"replaceChildren",targetNodeOrNodeArray){var firstTargetNode=getFirstNodeFromPossibleArray(targetNodeOrNodeArray),whenToDispose=function(){return!firstTargetNode||!ko.utils.domNodeIsAttachedToDocument(firstTargetNode)},activelyDisposeWhenNodeIsRemoved=firstTargetNode&&"replaceNode"==renderMode?firstTargetNode.parentNode:firstTargetNode;return ko.dependentObservable(function(){var bindingContext=dataOrBindingContext&&dataOrBindingContext instanceof ko.bindingContext?dataOrBindingContext:new ko.bindingContext(ko.utils.unwrapObservable(dataOrBindingContext)),templateName=resolveTemplateName(template,bindingContext.$data,bindingContext),renderedNodesArray=executeTemplate(targetNodeOrNodeArray,renderMode,templateName,bindingContext,options);"replaceNode"==renderMode&&(targetNodeOrNodeArray=renderedNodesArray,firstTargetNode=getFirstNodeFromPossibleArray(targetNodeOrNodeArray))},null,{disposeWhen:whenToDispose,disposeWhenNodeIsRemoved:activelyDisposeWhenNodeIsRemoved})}return ko.memoization.memoize(function(domNode){ko.renderTemplate(template,dataOrBindingContext,options,domNode,"replaceNode")})},ko.renderTemplateForEach=function(template,arrayOrObservableArray,options,targetNode,parentBindingContext){var arrayItemContext,executeTemplateForArrayItem=function(arrayValue,index){arrayItemContext=parentBindingContext.createChildContext(arrayValue,options.as,function(context){context.$index=index});var templateName=resolveTemplateName(template,arrayValue,arrayItemContext);return executeTemplate(null,"ignoreTargetNode",templateName,arrayItemContext,options)},activateBindingsCallback=function(arrayValue,addedNodesArray,index){activateBindingsOnContinuousNodeArray(addedNodesArray,arrayItemContext),options.afterRender&&options.afterRender(addedNodesArray,arrayValue),arrayItemContext=null};return ko.dependentObservable(function(){var unwrappedArray=ko.utils.unwrapObservable(arrayOrObservableArray)||[];"undefined"==typeof unwrappedArray.length&&(unwrappedArray=[unwrappedArray]);var filteredArray=ko.utils.arrayFilter(unwrappedArray,function(item){return options.includeDestroyed||item===undefined||null===item||!ko.utils.unwrapObservable(item._destroy)});ko.dependencyDetection.ignore(ko.utils.setDomNodeChildrenFromArrayMapping,null,[targetNode,filteredArray,executeTemplateForArrayItem,options,activateBindingsCallback])},null,{disposeWhenNodeIsRemoved:targetNode})};var templateComputedDomDataKey=ko.utils.domData.nextKey();ko.bindingHandlers.template={init:function(element,valueAccessor){var bindingValue=ko.utils.unwrapObservable(valueAccessor());if("string"==typeof bindingValue||bindingValue.name)ko.virtualElements.emptyNode(element);else if("nodes"in bindingValue){var nodes=bindingValue.nodes||[];if(ko.isObservable(nodes))throw new Error('The "nodes" option must be a plain, non-observable array.');var container=ko.utils.moveCleanedNodesToContainerElement(nodes);new ko.templateSources.anonymousTemplate(element).nodes(container)}else{var templateNodes=ko.virtualElements.childNodes(element),container=ko.utils.moveCleanedNodesToContainerElement(templateNodes);new ko.templateSources.anonymousTemplate(element).nodes(container)}return{controlsDescendantBindings:!0}},update:function(element,valueAccessor,allBindings,viewModel,bindingContext){var dataValue,templateName,value=valueAccessor(),options=ko.utils.unwrapObservable(value),shouldDisplay=!0,templateComputed=null;if("string"==typeof options?(templateName=value,options={}):(templateName=options.name,"if"in options&&(shouldDisplay=ko.utils.unwrapObservable(options.if)),shouldDisplay&&"ifnot"in options&&(shouldDisplay=!ko.utils.unwrapObservable(options.ifnot)),dataValue=ko.utils.unwrapObservable(options.data)),"foreach"in options){var dataArray=shouldDisplay&&options.foreach||[];templateComputed=ko.renderTemplateForEach(templateName||element,dataArray,options,element,bindingContext)}else if(shouldDisplay){var innerBindingContext="data"in options?bindingContext.createChildContext(dataValue,options.as):bindingContext;templateComputed=ko.renderTemplate(templateName||element,innerBindingContext,options,element)}else ko.virtualElements.emptyNode(element);disposeOldComputedAndStoreNewOne(element,templateComputed)}},ko.expressionRewriting.bindingRewriteValidators.template=function(bindingValue){var parsedBindingValue=ko.expressionRewriting.parseObjectLiteral(bindingValue);return 1==parsedBindingValue.length&&parsedBindingValue[0].unknown?null:ko.expressionRewriting.keyValueArrayContainsKey(parsedBindingValue,"name")?null:"This template engine does not support anonymous templates nested within its templates"},ko.virtualElements.allowedBindings.template=!0}(),ko.exportSymbol("setTemplateEngine",ko.setTemplateEngine),ko.exportSymbol("renderTemplate",ko.renderTemplate),ko.utils.findMovesInArrayComparison=function(left,right,limitFailedCompares){if(left.length&&right.length){var failedCompares,l,r,leftItem,rightItem;for(failedCompares=l=0;(!limitFailedCompares||failedCompares<limitFailedCompares)&&(leftItem=left[l]);++l){for(r=0;rightItem=right[r];++r)if(leftItem.value===rightItem.value){leftItem.moved=rightItem.index,rightItem.moved=leftItem.index,right.splice(r,1),failedCompares=r=0;break}failedCompares+=r}}},ko.utils.compareArrays=function(){function compareArrays(oldArray,newArray,options){return options="boolean"==typeof options?{dontLimitMoves:options}:options||{},oldArray=oldArray||[],newArray=newArray||[],oldArray.length<newArray.length?compareSmallArrayToBigArray(oldArray,newArray,statusNotInOld,statusNotInNew,options):compareSmallArrayToBigArray(newArray,oldArray,statusNotInNew,statusNotInOld,options)}function compareSmallArrayToBigArray(smlArray,bigArray,statusNotInSml,statusNotInBig,options){var smlIndex,bigIndex,thisRow,lastRow,bigIndexMaxForRow,bigIndexMinForRow,myMin=Math.min,myMax=Math.max,editDistanceMatrix=[],smlIndexMax=smlArray.length,bigIndexMax=bigArray.length,compareRange=bigIndexMax-smlIndexMax||1,maxDistance=smlIndexMax+bigIndexMax+1;for(smlIndex=0;smlIndex<=smlIndexMax;smlIndex++)for(lastRow=thisRow,editDistanceMatrix.push(thisRow=[]),bigIndexMaxForRow=myMin(bigIndexMax,smlIndex+compareRange),bigIndexMinForRow=myMax(0,smlIndex-1),bigIndex=bigIndexMinForRow;bigIndex<=bigIndexMaxForRow;bigIndex++)if(bigIndex)if(smlIndex)if(smlArray[smlIndex-1]===bigArray[bigIndex-1])thisRow[bigIndex]=lastRow[bigIndex-1];else{var northDistance=lastRow[bigIndex]||maxDistance,westDistance=thisRow[bigIndex-1]||maxDistance;thisRow[bigIndex]=myMin(northDistance,westDistance)+1}else thisRow[bigIndex]=bigIndex+1;else thisRow[bigIndex]=smlIndex+1;var meMinusOne,editScript=[],notInSml=[],notInBig=[];for(smlIndex=smlIndexMax,bigIndex=bigIndexMax;smlIndex||bigIndex;)meMinusOne=editDistanceMatrix[smlIndex][bigIndex]-1,bigIndex&&meMinusOne===editDistanceMatrix[smlIndex][bigIndex-1]?notInSml.push(editScript[editScript.length]={status:statusNotInSml,value:bigArray[--bigIndex],index:bigIndex}):smlIndex&&meMinusOne===editDistanceMatrix[smlIndex-1][bigIndex]?notInBig.push(editScript[editScript.length]={status:statusNotInBig,value:smlArray[--smlIndex],index:smlIndex}):(--bigIndex,--smlIndex,options.sparse||editScript.push({status:"retained",value:bigArray[bigIndex]}));return ko.utils.findMovesInArrayComparison(notInBig,notInSml,!options.dontLimitMoves&&10*smlIndexMax),editScript.reverse()}var statusNotInOld="added",statusNotInNew="deleted";return compareArrays}(),ko.exportSymbol("utils.compareArrays",ko.utils.compareArrays),function(){function mapNodeAndRefreshWhenChanged(containerNode,mapping,valueToMap,callbackAfterAddingNodes,index){var mappedNodes=[],dependentObservable=ko.dependentObservable(function(){var newMappedNodes=mapping(valueToMap,index,ko.utils.fixUpContinuousNodeArray(mappedNodes,containerNode))||[];mappedNodes.length>0&&(ko.utils.replaceDomNodes(mappedNodes,newMappedNodes),callbackAfterAddingNodes&&ko.dependencyDetection.ignore(callbackAfterAddingNodes,null,[valueToMap,newMappedNodes,index])),mappedNodes.length=0,ko.utils.arrayPushAll(mappedNodes,newMappedNodes)},null,{disposeWhenNodeIsRemoved:containerNode,disposeWhen:function(){return!ko.utils.anyDomNodeIsAttachedToDocument(mappedNodes)}});return{mappedNodes:mappedNodes,dependentObservable:dependentObservable.isActive()?dependentObservable:undefined}}var lastMappingResultDomDataKey=ko.utils.domData.nextKey(),deletedItemDummyValue=ko.utils.domData.nextKey();ko.utils.setDomNodeChildrenFromArrayMapping=function(domNode,array,mapping,options,callbackAfterAddingNodes){function itemMovedOrRetained(editScriptIndex,oldPosition){mapData=lastMappingResult[oldPosition],newMappingResultIndex!==oldPosition&&(itemsForMoveCallbacks[editScriptIndex]=mapData),mapData.indexObservable(newMappingResultIndex++),ko.utils.fixUpContinuousNodeArray(mapData.mappedNodes,domNode),newMappingResult.push(mapData),itemsToProcess.push(mapData)}function callCallback(callback,items){if(callback)for(var i=0,n=items.length;i<n;i++)items[i]&&ko.utils.arrayForEach(items[i].mappedNodes,function(node){callback(node,i,items[i].arrayEntry)})}array=array||[],options=options||{};for(var mapData,editScriptItem,movedIndex,isFirstExecution=ko.utils.domData.get(domNode,lastMappingResultDomDataKey)===undefined,lastMappingResult=ko.utils.domData.get(domNode,lastMappingResultDomDataKey)||[],lastArray=ko.utils.arrayMap(lastMappingResult,function(x){return x.arrayEntry}),editScript=ko.utils.compareArrays(lastArray,array,options.dontLimitMoves),newMappingResult=[],lastMappingResultIndex=0,newMappingResultIndex=0,nodesToDelete=[],itemsToProcess=[],itemsForBeforeRemoveCallbacks=[],itemsForMoveCallbacks=[],itemsForAfterAddCallbacks=[],i=0;editScriptItem=editScript[i];i++)switch(movedIndex=editScriptItem.moved,editScriptItem.status){case"deleted":movedIndex===undefined&&(mapData=lastMappingResult[lastMappingResultIndex],mapData.dependentObservable&&(mapData.dependentObservable.dispose(),mapData.dependentObservable=undefined),ko.utils.fixUpContinuousNodeArray(mapData.mappedNodes,domNode).length&&(options.beforeRemove&&(newMappingResult.push(mapData),itemsToProcess.push(mapData),mapData.arrayEntry===deletedItemDummyValue?mapData=null:itemsForBeforeRemoveCallbacks[i]=mapData),mapData&&nodesToDelete.push.apply(nodesToDelete,mapData.mappedNodes))),lastMappingResultIndex++;break;case"retained":itemMovedOrRetained(i,lastMappingResultIndex++);break;case"added":movedIndex!==undefined?itemMovedOrRetained(i,movedIndex):(mapData={arrayEntry:editScriptItem.value,indexObservable:ko.observable(newMappingResultIndex++)},newMappingResult.push(mapData),itemsToProcess.push(mapData),isFirstExecution||(itemsForAfterAddCallbacks[i]=mapData))}ko.utils.domData.set(domNode,lastMappingResultDomDataKey,newMappingResult),callCallback(options.beforeMove,itemsForMoveCallbacks),ko.utils.arrayForEach(nodesToDelete,options.beforeRemove?ko.cleanNode:ko.removeNode);for(var lastNode,node,i=0,nextNode=ko.virtualElements.firstChild(domNode);mapData=itemsToProcess[i];i++){mapData.mappedNodes||ko.utils.extend(mapData,mapNodeAndRefreshWhenChanged(domNode,mapping,mapData.arrayEntry,callbackAfterAddingNodes,mapData.indexObservable));for(var j=0;node=mapData.mappedNodes[j];nextNode=node.nextSibling,lastNode=node,j++)node!==nextNode&&ko.virtualElements.insertAfter(domNode,node,lastNode);!mapData.initialized&&callbackAfterAddingNodes&&(callbackAfterAddingNodes(mapData.arrayEntry,mapData.mappedNodes,mapData.indexObservable),mapData.initialized=!0)}for(callCallback(options.beforeRemove,itemsForBeforeRemoveCallbacks),i=0;i<itemsForBeforeRemoveCallbacks.length;++i)itemsForBeforeRemoveCallbacks[i]&&(itemsForBeforeRemoveCallbacks[i].arrayEntry=deletedItemDummyValue);callCallback(options.afterMove,itemsForMoveCallbacks),callCallback(options.afterAdd,itemsForAfterAddCallbacks)}}(),ko.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",ko.utils.setDomNodeChildrenFromArrayMapping),ko.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},ko.nativeTemplateEngine.prototype=new ko.templateEngine,ko.nativeTemplateEngine.prototype.constructor=ko.nativeTemplateEngine,ko.nativeTemplateEngine.prototype.renderTemplateSource=function(templateSource,bindingContext,options,templateDocument){var useNodesIfAvailable=!(ko.utils.ieVersion<9),templateNodesFunc=useNodesIfAvailable?templateSource.nodes:null,templateNodes=templateNodesFunc?templateSource.nodes():null;if(templateNodes)return ko.utils.makeArray(templateNodes.cloneNode(!0).childNodes);var templateText=templateSource.text();return ko.utils.parseHtmlFragment(templateText,templateDocument)},ko.nativeTemplateEngine.instance=new ko.nativeTemplateEngine,ko.setTemplateEngine(ko.nativeTemplateEngine.instance),ko.exportSymbol("nativeTemplateEngine",ko.nativeTemplateEngine),function(){ko.jqueryTmplTemplateEngine=function(){function ensureHasReferencedJQueryTemplates(){if(jQueryTmplVersion<2)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function executeTemplate(compiledTemplate,data,jQueryTemplateOptions){return jQueryInstance.tmpl(compiledTemplate,data,jQueryTemplateOptions)}var jQueryTmplVersion=this.jQueryTmplVersion=function(){if(!jQueryInstance||!jQueryInstance.tmpl)return 0;try{if(jQueryInstance.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(ex){}return 1}();this.renderTemplateSource=function(templateSource,bindingContext,options,templateDocument){templateDocument=templateDocument||document,options=options||{},ensureHasReferencedJQueryTemplates();var precompiled=templateSource.data("precompiled");if(!precompiled){var templateText=templateSource.text()||"";templateText="{{ko_with $item.koBindingContext}}"+templateText+"{{/ko_with}}",precompiled=jQueryInstance.template(null,templateText),templateSource.data("precompiled",precompiled)}var data=[bindingContext.$data],jQueryTemplateOptions=jQueryInstance.extend({koBindingContext:bindingContext},options.templateOptions),resultNodes=executeTemplate(precompiled,data,jQueryTemplateOptions);return resultNodes.appendTo(templateDocument.createElement("div")),jQueryInstance.fragments={},resultNodes},this.createJavaScriptEvaluatorBlock=function(script){return"{{ko_code ((function() { return "+script+" })()) }}"},this.addTemplate=function(templateName,templateMarkup){document.write("<script type='text/html' id='"+templateName+"'>"+templateMarkup+"</script>")},jQueryTmplVersion>0&&(jQueryInstance.tmpl.tag.ko_code={open:"__.push($1 || '');"},jQueryInstance.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},ko.jqueryTmplTemplateEngine.prototype=new ko.templateEngine,ko.jqueryTmplTemplateEngine.prototype.constructor=ko.jqueryTmplTemplateEngine;var jqueryTmplTemplateEngineInstance=new ko.jqueryTmplTemplateEngine;jqueryTmplTemplateEngineInstance.jQueryTmplVersion>0&&ko.setTemplateEngine(jqueryTmplTemplateEngineInstance),ko.exportSymbol("jqueryTmplTemplateEngine",ko.jqueryTmplTemplateEngine)}()})}()}()},{}]},{},[1]);